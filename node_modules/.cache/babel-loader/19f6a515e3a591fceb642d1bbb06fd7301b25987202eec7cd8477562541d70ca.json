{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport GanttElastic from \"gantt-elastic\";\nimport GanttHeader from \"gantt-elastic-header\";\nimport dayjs from \"dayjs\";\n\n// just helper to get current dates\nfunction getDate(hours) {\n  const currentDate = new Date();\n  const currentYear = currentDate.getFullYear();\n  const currentMonth = currentDate.getMonth();\n  const currentDay = currentDate.getDate();\n  const timeStamp = new Date(currentYear, currentMonth, currentDay, 0, 0, 0).getTime();\n  return new Date(timeStamp + hours * 60 * 60 * 1000).getTime();\n}\nlet tasks = [{\n  id: 1,\n  label: \"第一个里程碑\",\n  //标题\n  status: '进行中',\n  //状态\n  start: 1686240000000,\n  //开始时间\n  endTime: 1687536000000,\n  //结束时间\n  duration: 15 * 24 * 60 * 60 * 1000,\n  percent: 85,\n  type: \"project\"\n  //collapsed: true,\n}, {\n  id: 2,\n  label: \"第一个子节点\",\n  status: '进行中',\n  parentId: 1,\n  //对应的父节点\n  start: getDate(-24 * 4),\n  duration: 4 * 24 * 60 * 60 * 1000,\n  percent: 50,\n  type: \"milestone\",\n  collapsed: false,\n  //是否自动收缩\n  style: {\n    //颜色\n    base: {\n      fill: \"#1EBC61\",\n      //进度颜色\n      stroke: \"#0EAC51\"\n    }\n  }\n}, {\n  id: 3,\n  label: \"第一个孙节点\",\n  status: '<a href=\"https://www.google.com/search?q=John+Wayne\" target=\"_blank\" style=\"color:#0077c0;\">John Wayne</a>',\n  parentId: 2,\n  start: 1686240000000,\n  endTime: 1687536000000,\n  duration: 2 * 24 * 60 * 60 * 1000,\n  percent: 100,\n  type: \"task\"\n}, {\n  id: 4,\n  label: \"第二个里程碑\",\n  status: '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\n  start: getDate(-24 * 2),\n  duration: 2 * 24 * 60 * 60 * 1000,\n  percent: 50,\n  type: \"task\",\n  dependentOn: [3]\n}, {\n  id: 5,\n  label: \"第三个里程碑\",\n  status: '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\n  start: getDate(-24 * 2),\n  duration: 2 * 24 * 60 * 60 * 1000,\n  percent: 50,\n  type: \"task\",\n  dependentOn: [3]\n}, {\n  id: 6,\n  label: \"第四个里程碑\",\n  status: '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\n  start: getDate(-24 * 2),\n  duration: 2 * 24 * 60 * 60 * 1000,\n  percent: 50,\n  type: \"task\",\n  dependentOn: [3]\n}];\nlet options = {\n  timeAxis: {\n    scale: 'year' // 将右侧时间轴显示为“年”\n  },\n\n  header: {\n    time: {\n      unit: 'year' // 将头部显示为年份\n    }\n  },\n\n  list: {\n    scale: 'month',\n    // 将列表项显示为月份\n    defaultExpanded: []\n  },\n  locale: {\n    name: \"zh\",\n    Now: \"Now\",\n    year: \"2023\",\n    // weekdays:[\"月\",\"月\",\"月\",\"月\",\"月\",\"月\",\"月\"],\n    months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n    weekdays: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],\n    week: '周',\n    today: '今天'\n  },\n  taskMapping: {\n    progress: \"percent\"\n  },\n  maxRows: 100,\n  maxHeight: 500,\n  title: {\n    label: \"业务子系统\",\n    html: false\n  },\n  row: {\n    height: 25\n  },\n  calendar: {\n    hour: {\n      display: false\n    }\n  },\n  chart: {\n    progress: {\n      bar: false\n    },\n    expander: {\n      display: true\n    }\n  },\n  taskList: {\n    expander: {\n      straight: false\n    },\n    columns: [{\n      id: 1,\n      label: \"ID\",\n      value: \"id\",\n      width: 40\n    }, {\n      id: 2,\n      label: \"里程碑名称\",\n      value: \"label\",\n      width: 200,\n      expander: true,\n      html: true,\n      events: {\n        click({\n          data,\n          column\n        }) {\n          console.log('data', data);\n        }\n      }\n    }, {\n      id: 3,\n      label: \"里程碑状态\",\n      value: \"status\",\n      width: 130,\n      html: true\n    }\n    //   {\n    //       id: 5,\n    //       label: \"%\",\n    //       value: \"progress\",\n    //       width: 35,\n    //       style: {\n    //           \"task-list-header-label\": {\n    //               \"text-align\": \"center\",\n    //               width: \"100%\"\n    //           },\n    //           \"task-list-item-value-container\": {\n    //               \"text-align\": \"center\",\n    //               width: \"100%\"\n    //           }\n    //       }\n    //   }\n    ]\n  }\n};\n\nexport default {\n  name: \"Gantt\",\n  components: {\n    GanttElastic,\n    GanttHeader\n  },\n  data() {\n    return {\n      tasks,\n      options,\n      dynamicStyle: {},\n      lastId: 16\n    };\n  },\n  methods: {\n    addTask() {\n      this.tasks.push({\n        id: this.lastId++,\n        label: '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Yeaahh! you have added a task bro!</a>',\n        status: '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Awesome!</a>',\n        start: getDate(24 * 3),\n        duration: 1 * 24 * 60 * 60 * 1000,\n        percent: 50,\n        type: \"project\"\n      });\n    },\n    tasksUpdate(tasks) {\n      this.tasks = tasks;\n    },\n    optionsUpdate(options) {\n      this.options = options;\n    },\n    styleUpdate(style) {\n      this.dynamicStyle = style;\n    }\n  },\n  mounted() {\n    let svg = document.getElementsByClassName('gantt-elastic__task-list-expander-content');\n    setTimeout(() => {\n      if (svg.length > 1) {\n        svg = svg.splice(0, 1);\n      }\n    }, 1000);\n    console.log('tasks', svg);\n  }\n};","map":{"version":3,"names":["GanttElastic","GanttHeader","dayjs","getDate","hours","currentDate","Date","currentYear","getFullYear","currentMonth","getMonth","currentDay","timeStamp","getTime","tasks","id","label","status","start","endTime","duration","percent","type","parentId","collapsed","style","base","fill","stroke","dependentOn","options","timeAxis","scale","header","time","unit","list","defaultExpanded","locale","name","Now","year","months","weekdays","week","today","taskMapping","progress","maxRows","maxHeight","title","html","row","height","calendar","hour","display","chart","bar","expander","taskList","straight","columns","value","width","events","click","data","column","console","log","components","dynamicStyle","lastId","methods","addTask","push","tasksUpdate","optionsUpdate","styleUpdate","mounted","svg","document","getElementsByClassName","setTimeout","length","splice"],"sources":["src/views/User/User.vue"],"sourcesContent":["<template>\r\n   <q-page class=\"q-pa-sm\">\r\n      <gantt-elastic :options=\"options\" :tasks=\"tasks\" @tasks-changed=\"tasksUpdate\" @options-changed=\"optionsUpdate\"\r\n         @dynamic-style-changed=\"styleUpdate\">\r\n         <!-- <gantt-header slot=\"header\"></gantt-header> -->\r\n      </gantt-elastic>\r\n      <div class=\"q-mt-md\"></div>\r\n      <q-btn @click=\"addTask\" icon=\"mdi-plus\" label=\"Add task\" />\r\n   </q-page>\r\n</template>\r\n\r\n<style></style>\r\n\r\n<script>\r\nimport GanttElastic from \"gantt-elastic\";\r\nimport GanttHeader from \"gantt-elastic-header\";\r\nimport dayjs from \"dayjs\";\r\n\r\n// just helper to get current dates\r\nfunction getDate(hours) {\r\n   const currentDate = new Date();\r\n   const currentYear = currentDate.getFullYear();\r\n   const currentMonth = currentDate.getMonth();\r\n   const currentDay = currentDate.getDate();\r\n   const timeStamp = new Date(\r\n      currentYear,\r\n      currentMonth,\r\n      currentDay,\r\n      0,\r\n      0,\r\n      0\r\n   ).getTime();\r\n   return new Date(timeStamp + hours * 60 * 60 * 1000).getTime();\r\n}\r\nlet tasks = [\r\n   {\r\n      id: 1,\r\n      label: \"第一个里程碑\",//标题\r\n      status:\r\n         '进行中', //状态\r\n         start:1686240000000,  //开始时间\r\n      endTime:1687536000000,   //结束时间\r\n      duration: 15 * 24 * 60 * 60 * 1000,\r\n      percent: 85,\r\n      type: \"project\",\r\n      //collapsed: true,\r\n   },\r\n   {\r\n      id: 2,\r\n      label: \"第一个子节点\",\r\n      status:\r\n         '进行中',\r\n      parentId: 1,  //对应的父节点\r\n      start: getDate(-24 * 4),\r\n      duration: 4 * 24 * 60 * 60 * 1000,\r\n      percent: 50,\r\n      type: \"milestone\",\r\n      collapsed: false,  //是否自动收缩\r\n      style: {   //颜色\r\n         base: {\r\n            fill: \"#1EBC61\",   //进度颜色\r\n            stroke: \"#0EAC51\"\r\n         }\r\n      }\r\n   },\r\n   {\r\n      id: 3,\r\n      label: \"第一个孙节点\",\r\n      status:\r\n         '<a href=\"https://www.google.com/search?q=John+Wayne\" target=\"_blank\" style=\"color:#0077c0;\">John Wayne</a>',\r\n      parentId: 2,\r\n      start:1686240000000,\r\n      endTime:1687536000000,\r\n      duration: 2 * 24 * 60 * 60 * 1000,\r\n      percent: 100,\r\n      type: \"task\"\r\n   },\r\n   {\r\n      id: 4,\r\n      label: \"第二个里程碑\",\r\n      status:\r\n         '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\r\n      start: getDate(-24 * 2),\r\n      duration: 2 * 24 * 60 * 60 * 1000,\r\n      percent: 50,\r\n      type: \"task\",\r\n      dependentOn: [3]\r\n   },\r\n   {\r\n      id: 5,\r\n      label: \"第三个里程碑\",\r\n      status:\r\n         '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\r\n      start: getDate(-24 * 2),\r\n      duration: 2 * 24 * 60 * 60 * 1000,\r\n      percent: 50,\r\n      type: \"task\",\r\n      dependentOn: [3]\r\n   },\r\n   {\r\n      id: 6,\r\n      label: \"第四个里程碑\",\r\n      status:\r\n         '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\r\n      start: getDate(-24 * 2),\r\n      duration: 2 * 24 * 60 * 60 * 1000,\r\n      percent: 50,\r\n      type: \"task\",\r\n      dependentOn: [3]\r\n   },\r\n];\r\nlet options = {\r\n   timeAxis: {\r\n      scale: 'year', // 将右侧时间轴显示为“年”\r\n   },\r\n   header: {\r\n      time: {\r\n         unit: 'year', // 将头部显示为年份\r\n      },\r\n   },\r\n   list: {\r\n      scale: 'month', // 将列表项显示为月份\r\n      defaultExpanded: [],\r\n   },\r\n   locale: {\r\n      name: \"zh\",\r\n      Now: \"Now\",\r\n      year:\"2023\",\r\n      // weekdays:[\"月\",\"月\",\"月\",\"月\",\"月\",\"月\",\"月\"],\r\n      months: ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月',],\r\n      weekdays: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],\r\n      week: '周',\r\n      today: '今天',\r\n   },\r\n   taskMapping: {\r\n      progress: \"percent\"\r\n   },\r\n   maxRows: 100,\r\n   maxHeight: 500,\r\n   title: {\r\n      label: \"业务子系统\",\r\n      html: false\r\n   },\r\n   row: {\r\n      height: 25\r\n   },\r\n   calendar: {\r\n      hour: {\r\n         display: false\r\n      }\r\n   },\r\n   chart: {\r\n      progress: {\r\n         bar: false\r\n      },\r\n      expander: {\r\n         display: true\r\n      }\r\n   },\r\n   taskList: {\r\n      expander: {\r\n         straight: false\r\n      },\r\n      columns: [\r\n         {\r\n            id: 1,\r\n            label: \"ID\",\r\n            value: \"id\",\r\n            width: 40\r\n         },\r\n         {\r\n            id: 2,\r\n            label: \"里程碑名称\",\r\n            value: \"label\",\r\n            width: 200,\r\n            expander: true,\r\n            html: true,\r\n            events: {\r\n               click({ data, column }) {\r\n                console.log('data',data);\r\n               }\r\n            }\r\n         },\r\n         {\r\n            id: 3,\r\n            label: \"里程碑状态\",\r\n            value: \"status\",\r\n            width: 130,\r\n            html: true\r\n         },\r\n         //   {\r\n         //       id: 5,\r\n         //       label: \"%\",\r\n         //       value: \"progress\",\r\n         //       width: 35,\r\n         //       style: {\r\n         //           \"task-list-header-label\": {\r\n         //               \"text-align\": \"center\",\r\n         //               width: \"100%\"\r\n         //           },\r\n         //           \"task-list-item-value-container\": {\r\n         //               \"text-align\": \"center\",\r\n         //               width: \"100%\"\r\n         //           }\r\n         //       }\r\n         //   }\r\n      ]\r\n   },\r\n\r\n\r\n};\r\nexport default {\r\n   name: \"Gantt\",\r\n   components: {\r\n      GanttElastic,\r\n      GanttHeader\r\n   },\r\n   data() {\r\n      return {\r\n         tasks,\r\n         options,\r\n         dynamicStyle: {},\r\n         lastId: 16,\r\n      };\r\n   },\r\n   methods: {\r\n      addTask() {\r\n         this.tasks.push({\r\n            id: this.lastId++,\r\n            label:\r\n               '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Yeaahh! you have added a task bro!</a>',\r\n            status:\r\n               '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Awesome!</a>',\r\n            start: getDate(24 * 3),\r\n            duration: 1 * 24 * 60 * 60 * 1000,\r\n            percent: 50,\r\n            type: \"project\"\r\n         });\r\n      },\r\n      tasksUpdate(tasks) {\r\n         this.tasks = tasks;\r\n      },\r\n      optionsUpdate(options) {\r\n         this.options = options;\r\n      },\r\n      styleUpdate(style) {\r\n         this.dynamicStyle = style;\r\n      }\r\n   },\r\n   mounted(){\r\n      let svg = document.getElementsByClassName('gantt-elastic__task-list-expander-content')\r\n     setTimeout(()=>{\r\n      if(svg.length>1){\r\n      svg=svg.splice(0,1)\r\n     }\r\n     },1000)\r\n      console.log('tasks',svg);\r\n   }\r\n};\r\n</script>"],"mappings":";AAcA,OAAAA,YAAA;AACA,OAAAC,WAAA;AACA,OAAAC,KAAA;;AAEA;AACA,SAAAC,QAAAC,KAAA;EACA,MAAAC,WAAA,OAAAC,IAAA;EACA,MAAAC,WAAA,GAAAF,WAAA,CAAAG,WAAA;EACA,MAAAC,YAAA,GAAAJ,WAAA,CAAAK,QAAA;EACA,MAAAC,UAAA,GAAAN,WAAA,CAAAF,OAAA;EACA,MAAAS,SAAA,OAAAN,IAAA,CACAC,WAAA,EACAE,YAAA,EACAE,UAAA,EACA,GACA,GACA,CACA,EAAAE,OAAA;EACA,WAAAP,IAAA,CAAAM,SAAA,GAAAR,KAAA,mBAAAS,OAAA;AACA;AACA,IAAAC,KAAA,IACA;EACAC,EAAA;EACAC,KAAA;EAAA;EACAC,MAAA,EACA;EAAA;EACAC,KAAA;EAAA;EACAC,OAAA;EAAA;EACAC,QAAA;EACAC,OAAA;EACAC,IAAA;EACA;AACA,GACA;EACAP,EAAA;EACAC,KAAA;EACAC,MAAA,EACA;EACAM,QAAA;EAAA;EACAL,KAAA,EAAAf,OAAA;EACAiB,QAAA;EACAC,OAAA;EACAC,IAAA;EACAE,SAAA;EAAA;EACAC,KAAA;IAAA;IACAC,IAAA;MACAC,IAAA;MAAA;MACAC,MAAA;IACA;EACA;AACA,GACA;EACAb,EAAA;EACAC,KAAA;EACAC,MAAA,EACA;EACAM,QAAA;EACAL,KAAA;EACAC,OAAA;EACAC,QAAA;EACAC,OAAA;EACAC,IAAA;AACA,GACA;EACAP,EAAA;EACAC,KAAA;EACAC,MAAA,EACA;EACAC,KAAA,EAAAf,OAAA;EACAiB,QAAA;EACAC,OAAA;EACAC,IAAA;EACAO,WAAA;AACA,GACA;EACAd,EAAA;EACAC,KAAA;EACAC,MAAA,EACA;EACAC,KAAA,EAAAf,OAAA;EACAiB,QAAA;EACAC,OAAA;EACAC,IAAA;EACAO,WAAA;AACA,GACA;EACAd,EAAA;EACAC,KAAA;EACAC,MAAA,EACA;EACAC,KAAA,EAAAf,OAAA;EACAiB,QAAA;EACAC,OAAA;EACAC,IAAA;EACAO,WAAA;AACA,EACA;AACA,IAAAC,OAAA;EACAC,QAAA;IACAC,KAAA;EACA;;EACAC,MAAA;IACAC,IAAA;MACAC,IAAA;IACA;EACA;;EACAC,IAAA;IACAJ,KAAA;IAAA;IACAK,eAAA;EACA;EACAC,MAAA;IACAC,IAAA;IACAC,GAAA;IACAC,IAAA;IACA;IACAC,MAAA;IACAC,QAAA;IACAC,IAAA;IACAC,KAAA;EACA;EACAC,WAAA;IACAC,QAAA;EACA;EACAC,OAAA;EACAC,SAAA;EACAC,KAAA;IACAlC,KAAA;IACAmC,IAAA;EACA;EACAC,GAAA;IACAC,MAAA;EACA;EACAC,QAAA;IACAC,IAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACAV,QAAA;MACAW,GAAA;IACA;IACAC,QAAA;MACAH,OAAA;IACA;EACA;EACAI,QAAA;IACAD,QAAA;MACAE,QAAA;IACA;IACAC,OAAA,GACA;MACA/C,EAAA;MACAC,KAAA;MACA+C,KAAA;MACAC,KAAA;IACA,GACA;MACAjD,EAAA;MACAC,KAAA;MACA+C,KAAA;MACAC,KAAA;MACAL,QAAA;MACAR,IAAA;MACAc,MAAA;QACAC,MAAA;UAAAC,IAAA;UAAAC;QAAA;UACAC,OAAA,CAAAC,GAAA,SAAAH,IAAA;QACA;MACA;IACA,GACA;MACApD,EAAA;MACAC,KAAA;MACA+C,KAAA;MACAC,KAAA;MACAb,IAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAAA;EAEA;AAGA;;AACA;EACAZ,IAAA;EACAgC,UAAA;IACAvE,YAAA;IACAC;EACA;EACAkE,KAAA;IACA;MACArD,KAAA;MACAgB,OAAA;MACA0C,YAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAA7D,KAAA,CAAA8D,IAAA;QACA7D,EAAA,OAAA0D,MAAA;QACAzD,KAAA,EACA;QACAC,MAAA,EACA;QACAC,KAAA,EAAAf,OAAA;QACAiB,QAAA;QACAC,OAAA;QACAC,IAAA;MACA;IACA;IACAuD,YAAA/D,KAAA;MACA,KAAAA,KAAA,GAAAA,KAAA;IACA;IACAgE,cAAAhD,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;IACA;IACAiD,YAAAtD,KAAA;MACA,KAAA+C,YAAA,GAAA/C,KAAA;IACA;EACA;EACAuD,QAAA;IACA,IAAAC,GAAA,GAAAC,QAAA,CAAAC,sBAAA;IACAC,UAAA;MACA,IAAAH,GAAA,CAAAI,MAAA;QACAJ,GAAA,GAAAA,GAAA,CAAAK,MAAA;MACA;IACA;IACAjB,OAAA,CAAAC,GAAA,UAAAW,GAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}