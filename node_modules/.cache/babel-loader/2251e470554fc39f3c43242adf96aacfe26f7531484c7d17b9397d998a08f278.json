{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport GanttElastic from \"gantt-elastic\";\nimport GanttHeader from \"gantt-elastic-header\";\nimport dayjs from \"dayjs\";\nimport userTab from \"@/views/User/userTab.vue\";\n\n// just helper to get current dates\nexport function getDate(hours) {\n  const currentDate = new Date();\n  const currentYear = currentDate.getFullYear();\n  const currentMonth = currentDate.getMonth();\n  const currentDay = currentDate.getDate();\n  const timeStamp = new Date(currentYear, currentMonth, currentDay, 0, 0, 0).getTime();\n  return new Date(timeStamp + hours * 60 * 60 * 1000).getTime();\n}\nvar that = {};\nexport default {\n  components: {\n    GanttElastic,\n    GanttHeader,\n    userTab\n  },\n  data() {\n    return {\n      tasks: [{\n        id: 1,\n        label: \"第一个里程碑\",\n        //标题\n        status: '进行中',\n        //状态\n        start: 1686240000000,\n        //开始时间\n        endTime: 1687536000000,\n        //结束时间\n        duration: 15 * 24 * 60 * 60 * 1000,\n        percent: 85,\n        type: \"project\"\n        //collapsed: true,\n      }, {\n        id: 2,\n        label: \"第一个子节点\",\n        status: '进行中',\n        parentId: 1,\n        //对应的父节点\n        start: getDate(-24 * 4),\n        duration: 4 * 24 * 60 * 60 * 1000,\n        percent: 50,\n        type: \"milestone\",\n        collapsed: false,\n        //是否自动收缩\n        style: {\n          //颜色\n          base: {\n            fill: \"#1EBC61\",\n            //进度颜色\n            stroke: \"#0EAC51\"\n          }\n        }\n      }, {\n        id: 3,\n        label: \"第一个孙节点\",\n        status: '<a href=\"https://www.google.com/search?q=John+Wayne\" target=\"_blank\" style=\"color:#0077c0;\">John Wayne</a>',\n        parentId: 2,\n        start: 1686240000000,\n        endTime: 1687536000000,\n        duration: 2 * 24 * 60 * 60 * 1000,\n        percent: 100,\n        type: \"task\"\n      }, {\n        id: 4,\n        label: \"第二个里程碑\",\n        status: '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\n        start: getDate(-24 * 2),\n        duration: 2 * 24 * 60 * 60 * 1000,\n        percent: 50,\n        type: \"task\",\n        dependentOn: [3]\n      }, {\n        id: 5,\n        label: \"第三个里程碑\",\n        status: '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\n        start: getDate(-24 * 2),\n        duration: 2 * 24 * 60 * 60 * 1000,\n        percent: 50,\n        type: \"task\",\n        dependentOn: [3]\n      }, {\n        id: 6,\n        label: \"第四个里程碑\",\n        status: '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\n        start: getDate(-24 * 2),\n        duration: 2 * 24 * 60 * 60 * 1000,\n        percent: 50,\n        type: \"task\",\n        dependentOn: [3]\n      }],\n      options: {\n        timeAxis: {\n          scale: 'year' // 将右侧时间轴显示为“年”\n        },\n\n        header: {\n          time: {\n            unit: 'year' // 将头部显示为年份\n          }\n        },\n\n        list: {\n          scale: 'month',\n          // 将列表项显示为月份\n          defaultExpanded: []\n        },\n        locale: {\n          name: \"zh\",\n          Now: \"Now\",\n          year: \"2023\"\n          // weekdays:[\"月\",\"月\",\"月\",\"月\",\"月\",\"月\",\"月\"],\n        },\n\n        taskMapping: {\n          progress: \"percent\"\n        },\n        maxRows: 100,\n        maxHeight: 500,\n        title: {\n          label: \"业务子系统\",\n          html: false\n        },\n        row: {\n          height: 25\n        },\n        calendar: {\n          hour: {\n            display: false\n          }\n        },\n        chart: {\n          progress: {\n            bar: false\n          },\n          expander: {\n            display: true\n          }\n        },\n        taskList: {\n          expander: {\n            straight: false\n          },\n          columns: [{\n            id: 2,\n            label: \"里程碑名称\",\n            value: \"label\",\n            width: 200,\n            expander: true,\n            html: true,\n            events: {\n              click({\n                data,\n                column\n              }) {\n                console.log(that.tasks);\n              }\n            }\n          }, {\n            id: 3,\n            label: \"里程碑状态\",\n            value: \"status\",\n            width: 130,\n            html: true\n          }\n          //   {\n          //       id: 5,\n          //       label: \"%\",\n          //       value: \"progress\",\n          //       width: 35,\n          //       style: {\n          //           \"task-list-header-label\": {\n          //               \"text-align\": \"center\",\n          //               width: \"100%\"\n          //           },\n          //           \"task-list-item-value-container\": {\n          //               \"text-align\": \"center\",\n          //               width: \"100%\"\n          //           }\n          //       }\n          //   }\n          ]\n        }\n      },\n\n      dynamicStyle: {},\n      lastId: 16,\n      svglist: []\n    };\n  },\n  methods: {\n    addTask(data) {\n      this.tasks.push({\n        id: this.lastId++,\n        label: '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Yeaahh! you have added a task bro!</a>',\n        status: '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Awesome!</a>',\n        start: \"\",\n        parentId: 1,\n        //对应的父节点\n        duration: 1 * 24 * 60 * 60 * 1000,\n        percent: 50,\n        type: \"project\"\n      });\n    },\n    tasksUpdate(tasks) {\n      this.tasks = tasks;\n    },\n    optionsUpdate(options) {\n      this.options = options;\n    },\n    styleUpdate(style) {\n      this.dynamicStyle = style;\n    }\n  },\n  mounted() {\n    let svg = document.querySelectorAll('.gantt-elastic__task-list-expander-content');\n    let svg2 = document.querySelectorAll('.gantt-elastic__chart-expander-content');\n    let svglist = [...svg];\n    let svglist2 = [...svg2];\n    svglist.map((item, index) => {\n      item.style.display = 'none';\n    });\n    svglist2.map((item, index) => {\n      item.style.display = 'none';\n    });\n  },\n  created() {\n    that = this;\n  }\n};","map":{"version":3,"names":["GanttElastic","GanttHeader","dayjs","userTab","getDate","hours","currentDate","Date","currentYear","getFullYear","currentMonth","getMonth","currentDay","timeStamp","getTime","that","components","data","tasks","id","label","status","start","endTime","duration","percent","type","parentId","collapsed","style","base","fill","stroke","dependentOn","options","timeAxis","scale","header","time","unit","list","defaultExpanded","locale","name","Now","year","taskMapping","progress","maxRows","maxHeight","title","html","row","height","calendar","hour","display","chart","bar","expander","taskList","straight","columns","value","width","events","click","column","console","log","dynamicStyle","lastId","svglist","methods","addTask","push","tasksUpdate","optionsUpdate","styleUpdate","mounted","svg","document","querySelectorAll","svg2","svglist2","map","item","index","created"],"sources":["src/components/Gantt/Ganntt.vue"],"sourcesContent":["<template>\r\n    <div>\r\n       <div class=\"gatte_box\">\r\n         <gantt-elastic :options=\"options\" :tasks=\"tasks\" @tasks-changed=\"tasksUpdate\" @options-changed=\"optionsUpdate\"\r\n         @dynamic-style-changed=\"styleUpdate\">\r\n         <!-- <gantt-header slot=\"header\"></gantt-header> -->\r\n      </gantt-elastic>\r\n       </div>\r\n      <div class=\"q-mt-md\"></div>\r\n      <div class=\"tab\">\r\n         <userTab></userTab>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport GanttElastic from \"gantt-elastic\";\r\nimport GanttHeader from \"gantt-elastic-header\";\r\nimport dayjs from \"dayjs\";\r\nimport userTab from \"@/views/User/userTab.vue\"\r\n\r\n// just helper to get current dates\r\nexport function getDate(hours) {\r\n   const currentDate = new Date();\r\n   const currentYear = currentDate.getFullYear();\r\n   const currentMonth = currentDate.getMonth();\r\n   const currentDay = currentDate.getDate();\r\n   const timeStamp = new Date(\r\n      currentYear,\r\n      currentMonth,\r\n      currentDay,\r\n      0,\r\n      0,\r\n      0\r\n   ).getTime();\r\n   return new Date(timeStamp + hours * 60 * 60 * 1000).getTime();\r\n}\r\nvar that = {}\r\nexport default {\r\n    components: {\r\n      GanttElastic,\r\n      GanttHeader,\r\n      userTab\r\n   },\r\n   data() {\r\n    return {\r\n        tasks: [\r\n            {\r\n               id: 1,\r\n               label: \"第一个里程碑\",//标题\r\n               status:\r\n                  '进行中', //状态\r\n               start: 1686240000000,  //开始时间\r\n               endTime: 1687536000000,   //结束时间\r\n               duration: 15 * 24 * 60 * 60 * 1000,\r\n               percent: 85,\r\n               type: \"project\",\r\n               //collapsed: true,\r\n            },\r\n            {\r\n               id: 2,\r\n               label: \"第一个子节点\",\r\n               status:\r\n                  '进行中',\r\n               parentId: 1,  //对应的父节点\r\n               start: getDate(-24 * 4),\r\n               duration: 4 * 24 * 60 * 60 * 1000,\r\n               percent: 50,\r\n               type: \"milestone\",\r\n               collapsed: false,  //是否自动收缩\r\n               style: {   //颜色\r\n                  base: {\r\n                     fill: \"#1EBC61\",   //进度颜色\r\n                     stroke: \"#0EAC51\"\r\n                  }\r\n               }\r\n            },\r\n            {\r\n               id: 3,\r\n               label: \"第一个孙节点\",\r\n               status:\r\n                  '<a href=\"https://www.google.com/search?q=John+Wayne\" target=\"_blank\" style=\"color:#0077c0;\">John Wayne</a>',\r\n               parentId: 2,\r\n               start: 1686240000000,\r\n               endTime: 1687536000000,\r\n               duration: 2 * 24 * 60 * 60 * 1000,\r\n               percent: 100,\r\n               type: \"task\"\r\n            },\r\n            {\r\n               id: 4,\r\n               label: \"第二个里程碑\",\r\n               status:\r\n                  '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\r\n               start: getDate(-24 * 2),\r\n               duration: 2 * 24 * 60 * 60 * 1000,\r\n               percent: 50,\r\n               type: \"task\",\r\n               dependentOn: [3]\r\n            },\r\n            {\r\n               id: 5,\r\n               label: \"第三个里程碑\",\r\n               status:\r\n                  '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\r\n               start: getDate(-24 * 2),\r\n               duration: 2 * 24 * 60 * 60 * 1000,\r\n               percent: 50,\r\n               type: \"task\",\r\n               dependentOn: [3]\r\n            },\r\n            {\r\n               id: 6,\r\n               label: \"第四个里程碑\",\r\n               status:\r\n                  '<a href=\"https://www.google.com/search?q=Clark+Kent\" target=\"_blank\" style=\"color:#0077c0;\">Clark Kent</a>',\r\n               start: getDate(-24 * 2),\r\n               duration: 2 * 24 * 60 * 60 * 1000,\r\n               percent: 50,\r\n               type: \"task\",\r\n               dependentOn: [3]\r\n            },\r\n         ],\r\n         options: {\r\n            timeAxis: {\r\n               scale: 'year', // 将右侧时间轴显示为“年”\r\n            },\r\n            header: {\r\n               time: {\r\n                  unit: 'year', // 将头部显示为年份\r\n               },\r\n            },\r\n            list: {\r\n               scale: 'month', // 将列表项显示为月份\r\n               defaultExpanded: [],\r\n            },\r\n            locale: {\r\n               name: \"zh\",\r\n               Now: \"Now\",\r\n               year: \"2023\",\r\n               // weekdays:[\"月\",\"月\",\"月\",\"月\",\"月\",\"月\",\"月\"],\r\n             \r\n            },\r\n            taskMapping: {\r\n               progress: \"percent\"\r\n            },\r\n            maxRows: 100,\r\n            maxHeight: 500,\r\n            title: {\r\n               label: \"业务子系统\",\r\n               html: false\r\n            },\r\n            row: {\r\n               height: 25\r\n            },\r\n            calendar: {\r\n               hour: {\r\n                  display: false\r\n               }\r\n            },\r\n            chart: {\r\n               progress: {\r\n                  bar: false\r\n               },\r\n               expander: {\r\n                  display: true\r\n               }\r\n            },\r\n            taskList: {\r\n               expander: {\r\n                  straight: false\r\n               },\r\n               columns: [\r\n                  {\r\n                     id: 2,\r\n                     label: \"里程碑名称\",\r\n                     value: \"label\",\r\n                     width: 200,\r\n                     expander: true,\r\n                     html: true,\r\n                     events: {\r\n                        click({ data, column }) {\r\n\r\n                           console.log(that.tasks);\r\n                        }\r\n                     }\r\n                  },\r\n                  {\r\n                     id: 3,\r\n                     label: \"里程碑状态\",\r\n                     value: \"status\",\r\n                     width: 130,\r\n                     html: true\r\n                  },\r\n                  //   {\r\n                  //       id: 5,\r\n                  //       label: \"%\",\r\n                  //       value: \"progress\",\r\n                  //       width: 35,\r\n                  //       style: {\r\n                  //           \"task-list-header-label\": {\r\n                  //               \"text-align\": \"center\",\r\n                  //               width: \"100%\"\r\n                  //           },\r\n                  //           \"task-list-item-value-container\": {\r\n                  //               \"text-align\": \"center\",\r\n                  //               width: \"100%\"\r\n                  //           }\r\n                  //       }\r\n                  //   }\r\n               ]\r\n            },\r\n\r\n\r\n         },\r\n         dynamicStyle: {},\r\n         lastId: 16,\r\n         svglist: []\r\n    };\r\n   },\r\n   methods:{\r\n    addTask(data) {\r\n         this.tasks.push({\r\n            id: this.lastId++,\r\n            label:\r\n               '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Yeaahh! you have added a task bro!</a>',\r\n            status:\r\n               '<a href=\"https://images.pexels.com/photos/423364/pexels-photo-423364.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\" target=\"_blank\" style=\"color:#0077c0;\">Awesome!</a>',\r\n            start: \"\",\r\n            parentId: 1,  //对应的父节点\r\n            duration: 1 * 24 * 60 * 60 * 1000,\r\n            percent: 50,\r\n            type: \"project\"\r\n         });\r\n      },\r\n      tasksUpdate(tasks) {\r\n         this.tasks = tasks;\r\n      },\r\n      optionsUpdate(options) {\r\n         this.options = options;\r\n      },\r\n      styleUpdate(style) {\r\n         this.dynamicStyle = style;\r\n      },\r\n   },\r\n   mounted() {\r\n      let svg = document.querySelectorAll('.gantt-elastic__task-list-expander-content');\r\n      let svg2 = document.querySelectorAll('.gantt-elastic__chart-expander-content');\r\n      let svglist = [...svg]\r\n      let svglist2 = [...svg2]\r\n      svglist.map((item, index) => {\r\n         item.style.display = 'none'\r\n      })\r\n      svglist2.map((item, index) => {\r\n         item.style.display = 'none'\r\n      })\r\n\r\n   },\r\n   created() {\r\n      that = this\r\n   }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.gatte_box{\r\n   width: 100%;\r\n   box-sizing: border-box;\r\n   padding: 20px 50px;\r\n}\r\n.tab {\r\n   width: 70%;\r\n   margin: 0 auto;\r\n   background-color: #fff;\r\n   padding: 50px;\r\n   background-color: rgba(237, 266, 255);\r\n   font-size: 16px;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}