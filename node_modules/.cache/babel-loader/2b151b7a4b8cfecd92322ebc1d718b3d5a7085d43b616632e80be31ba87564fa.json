{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/Lowcode/vue-simple/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _dhtmlxGantt = _interopRequireDefault(require(\"dhtmlx-gantt\"));\nrequire(\"dhtmlx-gantt/codebase/dhtmlxgantt.css\");\n// moment格式化时间\n// 引入模块\n//皮肤\nvar _default = {\n  name: \"gantt\",\n  data() {\n    return {\n      tasks: {\n        data: []\n      }\n    };\n  },\n  mounted() {\n    let arr = [{\n      //没有实际结束   实际开始在计划之前（不显示） b121\n      id: \"7086894358414229504\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 1,\n      scheduleNameCn: \"签约\",\n      scheduleNameEn: \"Sign\",\n      scheduleBeginDate: \"2023-07-01\",\n      scheduleEndDate: \"2024-01-24\",\n      actualBeginDate: \"2023-06-05\",\n      actualEndDate: null,\n      stageCode: \"VESSEL_SCHEDULE_1\",\n      completedPercent: 22,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //有实际结束   实际开始在计划之后（显示） b12\n      id: \"7086894728481865728\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"7086894358414229504\",\n      dispNo: null,\n      scheduleNameCn: \"采购设备\",\n      scheduleNameEn: \"caigoushebei\",\n      scheduleBeginDate: \"2023-07-01\",\n      scheduleEndDate: \"2024-01-24\",\n      actualBeginDate: \"2023-07-05\",\n      actualEndDate: \"2023-07-28\",\n      stageCode: \"\",\n      completedPercent: 13,\n      scheduleRemark: \"\",\n      fileIds: null,\n      businessCode: null\n    }, {\n      //有实际结束   实际开始在计划之前（显示） j21\n      id: \"7088381175781130240\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"7086894358414229504\",\n      dispNo: null,\n      scheduleNameCn: \"审图\",\n      scheduleNameEn: \"Plan Approval\",\n      scheduleBeginDate: \"2023-07-01\",\n      scheduleEndDate: \"2024-02-24\",\n      actualBeginDate: \"2023-06-05\",\n      actualEndDate: \"2023-07-28\",\n      stageCode: \"\",\n      completedPercent: 31,\n      scheduleRemark: \"\",\n      fileIds: null,\n      businessCode: null\n    }, {\n      //有实际结束   实际开始在计划之后（显示） j21\n      id: \"7086894358431006720\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 2,\n      scheduleNameCn: \"开工\",\n      scheduleNameEn: \"Start\",\n      scheduleBeginDate: \"2023-07-01\",\n      scheduleEndDate: \"2023-08-24\",\n      actualBeginDate: \"2023-07-10\",\n      actualEndDate: \"2023-09-28\",\n      stageCode: \"VESSEL_SCHEDULE_2\",\n      completedPercent: 6,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //有实际结束   实际开始(相等于计划开始)在计划之后（显示） \"b21\"\n      id: \"7088384223853150208\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"7086894358431006720\",\n      dispNo: null,\n      scheduleNameCn: \"加工\",\n      scheduleNameEn: \"Steel Fabrication\",\n      scheduleBeginDate: \"2023-07-01\",\n      scheduleEndDate: \"2023-08-24\",\n      actualBeginDate: \"2023-07-01\",\n      actualEndDate: \"2023-12-28\",\n      stageCode: \"\",\n      completedPercent: 6,\n      scheduleRemark: \"\",\n      fileIds: null,\n      businessCode: null\n    }, {\n      ///有实际结束   对应相等\n      id: \"7088384248909922304\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"7086894358431006720\",\n      dispNo: null,\n      scheduleNameCn: \"完善\",\n      scheduleNameEn: \"Steel Fabrication\",\n      scheduleBeginDate: \"2023-07-01\",\n      scheduleEndDate: \"2023-08-24\",\n      actualBeginDate: \"2023-07-01\",\n      actualEndDate: \"2023-08-24\",\n      stageCode: \"\",\n      completedPercent: 6,\n      scheduleRemark: \"\",\n      fileIds: null,\n      businessCode: null\n    }, {\n      //有实际结束   计划 包含实际 \"b12\"\n      id: \"7086894358472949760\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 3,\n      scheduleNameCn: \"审核\",\n      scheduleNameEn: \"Keel\",\n      scheduleBeginDate: \"2023-08-01\",\n      scheduleEndDate: \"2024-08-24\",\n      actualBeginDate: \"2023-08-28\",\n      actualEndDate: \"2023-12-24\",\n      stageCode: \"VESSEL_SCHEDULE_3\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //没有实际   计划 包含实际 b12\n      id: \"7086894358485532672\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 4,\n      scheduleNameCn: \"试用\",\n      scheduleNameEn: \"Launch\",\n      scheduleBeginDate: \"2023-08-01\",\n      scheduleEndDate: \"2024-08-24\",\n      actualBeginDate: null,\n      actualEndDate: null,\n      stageCode: \"VESSEL_SCHEDULE_4\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //有实际   实际开始  大于   计划开始 b121\n      id: \"7086894358502309888\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 5,\n      scheduleNameCn: \"交付\",\n      scheduleNameEn: \"Voyage\",\n      scheduleBeginDate: \"2023-08-01\",\n      scheduleEndDate: \"2024-08-24\",\n      actualBeginDate: \"2023-08-28\",\n      actualEndDate: null,\n      stageCode: \"VESSEL_SCHEDULE_5\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //没有相交时间  实际在后  l12\n      id: \"7086894358544252928\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 6,\n      scheduleNameCn: \"使用中\",\n      scheduleNameEn: \"Delivery\",\n      scheduleBeginDate: \"2023-05-01\",\n      scheduleEndDate: \"2023-06-24\",\n      actualBeginDate: \"2023-08-28\",\n      actualEndDate: \"2024-10-28\",\n      stageCode: \"VESSEL_SCHEDULE_6\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //没有相交时间  实际在前  l21\n      id: \"70868943585442529288948\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 6,\n      scheduleNameCn: \"反馈\",\n      scheduleNameEn: \"Delivery\",\n      scheduleBeginDate: \"2023-12-01\",\n      scheduleEndDate: \"2024-06-24\",\n      actualBeginDate: \"2023-08-28\",\n      actualEndDate: \"2023-10-28\",\n      stageCode: \"VESSEL_SCHEDULE_6\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //两端超出  l12s\n      id: \"7086894358544252928894887478\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 6,\n      scheduleNameCn: \"结项\",\n      scheduleNameEn: \"Delivery\",\n      scheduleBeginDate: \"2023-8-01\",\n      scheduleEndDate: \"2023-10-24\",\n      actualBeginDate: \"2023-06-28\",\n      actualEndDate: \"2023-12-28\",\n      stageCode: \"VESSEL_SCHEDULE_6\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }, {\n      //实际开始  和  计划结束相等  l12s\n      id: \"7086894358544252928894887478\",\n      nbProjectId: \"7086894357860581376\",\n      projectVesselId: \"7086894358300983296\",\n      vesselNameCn: \"凯勇\",\n      vesselNameEn: \"NEW VALOR\",\n      parentId: \"0\",\n      dispNo: 6,\n      scheduleNameCn: \"结项\",\n      scheduleNameEn: \"Delivery\",\n      scheduleBeginDate: \"2023-8-01\",\n      scheduleEndDate: \"2023-8-16\",\n      actualBeginDate: \"2023-8-16\",\n      actualEndDate: \"2023-8-24\",\n      stageCode: \"VESSEL_SCHEDULE_6\",\n      completedPercent: 0,\n      scheduleRemark: null,\n      fileIds: null,\n      businessCode: null\n    }];\n    let currentDate = new Date();\n    let year = currentDate.getFullYear();\n    let month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\n    let day = String(currentDate.getDate()).padStart(2, \"0\");\n    let formattedDate = `${year}-${month}-${day}`;\n    console.log('formattedDate', formattedDate);\n    this.initData(arr);\n    _dhtmlxGantt.default.config.show_progress = false;\n    _dhtmlxGantt.default.config.open_tree_initially = true; //默认展开子级\n    // 设置左侧树子任务缩进和展开\n    _dhtmlxGantt.default.config.indent = 30;\n    _dhtmlxGantt.default.config.grid_width = 350;\n    _dhtmlxGantt.default.config.open_tree_initially = true;\n    function percenToString(num) {\n      return Math.floor(num * 100) + \"%\";\n    }\n\n    // 设置每一部分的颜色\n    function renderLabel(progress, type, state, px, block, leftpx, falge) {\n      var relWidth = progress * 100;\n      var cssClass = \"custom_progress \";\n      if (type === 1) {\n        cssClass += \"nearly_done\";\n      } else if (type === 2) {\n        if (state) {\n          cssClass += \"in_progress\";\n        } else {\n          cssClass += \"in_progress_w\";\n        }\n      } else if (type === 3) {\n        cssClass += \"tshu\";\n      } else {\n        cssClass += \"idle\";\n      }\n      return \"<div class='\" + cssClass + \"' style='width:\" + relWidth + `%;height:25%;display:${block ? \"block\" : \"inline-block\"};margin-top:${px}px;margin-left:${leftpx * 100}%;display:${falge}'>` + \"</div>\";\n    }\n    // 根据定义类型判断颜色顺序\n    _dhtmlxGantt.default.templates.task_text = function (start, end, task) {\n      let colorType = task.colorType;\n      if (colorType === \"j12\" || colorType === \"one\") {\n        return renderLabel(task.progress1 + task.progress2, 1, task.state, 0, true, 0) + renderLabel(task.progress2, 3, task.state, -8, true, task.progress2) + renderLabel(task.progress3 + task.progress2, 2, task.state, 10, false, task.progress1);\n      } else if (colorType === \"j21\") {\n        return renderLabel(task.progress1 + task.progress2, 3, task.state, 0, true, 0) + renderLabel(task.progress2 + task.progress1, 2, task.state, 15, true, 0) + renderLabel(task.progress3 + task.progress2, 1, task.state, -30, false, task.progress2);\n      } else if (colorType === \"b121\") {\n        return renderLabel(task.progress1 + task.progress2, 1, task.state, 0, true, 0, 'block') + renderLabel(task.progress2, 2, task.state, 15, true, task.progress1, 'none') + renderLabel(task.progress3 + task.progress2, 1, task.state, -38, false, task.progress2, 'none');\n      } else if (colorType === \"b121s\") {\n        return renderLabel(task.progress1 + task.progress2, 1, task.state, 0, true, 0, 'block') + renderLabel(task.progress2, 2, task.state, 15, true, task.progress1, 'none') + renderLabel(task.progress3 + task.progress2, 1, task.state, -38, false, task.progress2, 'none');\n      } else if (colorType === \"b12\") {\n        if (task.actualStart == null) {\n          return renderLabel(task.progress3 + task.progress2 + task.progress1, 1, task.state, 0, true, 0, 'block') + renderLabel(task.progress2, 2, task.state, 15, true, task.progress1, 'none') + renderLabel(task.progress1 + task.progress2, 1, task.state, -38, false, task.progress2, 'block');\n        } else {\n          return renderLabel(task.progress3 + task.progress2 + task.progress1, 1, task.state, 0, true, 0, 'block') + renderLabel(task.progress2, 2, task.state, 15, true, task.progress1, 'block') + renderLabel(task.progress1 + task.progress2, 1, task.state, -38, false, task.progress2, 'block');\n        }\n      } else if (colorType === \"b21\") {\n        return renderLabel(task.progress2, 1, task.state, 0, true, task.progress1) + renderLabel(1 - task.progress2, 3, task.state, -8, true, task.progress2, 'block') + renderLabel(task.progress2 + task.progress3, 2, task.state, 10, false, 0);\n      } else if (colorType === \"l12\") {\n        return renderLabel(task.progress1, 1, task.state, 0, true, 0) + renderLabel(task.progress3, 2, task.state, 15, true, task.progress2 + task.progress1) + renderLabel(1, 3, task.state, -30, false, task.progress1);\n      } else if (colorType === \"l21\") {\n        return renderLabel(task.progress3, 1, task.state, 0, true, task.progress1 + task.progress2) + renderLabel(task.progress1, 2, task.state, 15, true, 0) + renderLabel(task.progress2 + task.progress1, 3, task.state, -30, true, 0);\n      } else if (colorType === \"l12s\") {\n        return renderLabel(task.progress3, 1, task.state, 0, true, task.progress1 - task.progress2) + renderLabel(task.progress1, 2, task.state, 15, true, 0) + renderLabel(task.progress1 - task.progress2, 3, task.state, -30, true, 0) + renderLabel(task.progress1 - task.progress3, 3, task.state, -8, true, task.progress1 - task.progress2 + task.progress3);\n      } else if (colorType === \"ts12\") {\n        return (\n          // renderLabel(task.progress1, 1, task.state) +\n          // renderLabel(task.progress2, 2, task.state) +\n          renderLabel(task.progress1 + task.progress2, 1, task.state, 0, false, 0)\n        );\n      } else if (colorType == \"ts13\") {\n        renderLabel(1, 1, task.state, 0, true, task.progress1 - task.progress2);\n      } else {\n        return renderLabel(task.progress1 + task.progress2, 1, task.state, 0, true, 0) + renderLabel(task.progress2, 2, task.state, 15, true, task.progress2) + renderLabel(task.progress3 + task.progress2, 3, task.state, -38, false, task.progress2);\n      }\n    };\n    _dhtmlxGantt.default.plugins({\n      marker: true,\n      tooltip: true\n    }); // 开启marker插件\n    var dateToStr = _dhtmlxGantt.default.date.date_to_str(_dhtmlxGantt.default.config.task_date);\n    var today = new Date();\n    // 添加固定时间线\n    _dhtmlxGantt.default.addMarker({\n      start_date: today,\n      css: \"today\",\n      text: \"今日:\" + (0, _moment.default)(new Date()).format(\"YYYY-MM-DD\"),\n      title: \"Today: \" + dateToStr(today)\n    });\n    // 提示框内容\n    _dhtmlxGantt.default.templates.tooltip_text = function (start, end, task) {\n      return \"<b>任务内容:</b>\" + task.text + \"<br/><b>计划开始:</b> \" + task.planStart + \"<br/><b>计划结束:</b> \" + task.planEnd + \"<br/><b>实际开始:</b> \" + task.actualStart + \"<br/><b>实际结束:</b> \" + task.actualEnd;\n    };\n    _dhtmlxGantt.default.config.scale_unit = \"year\";\n    _dhtmlxGantt.default.config.step = 1;\n    _dhtmlxGantt.default.config.date_scale = \"%Y\";\n    //当右侧不止显示年份时，可以添加展示月日，添加一个就加一行\n    _dhtmlxGantt.default.config.subscales = [{\n      unit: \"month\",\n      step: 1,\n      date: \"%m\"\n    }];\n    //甘特图右侧表头的高度\n    _dhtmlxGantt.default.config.scale_height = 80;\n    //使用中文\n    _dhtmlxGantt.default.i18n.setLocale(\"cn\");\n    //自适应甘特图的尺寸大小, 使得在不出现滚动条的情况下, 显示全部任务\n    _dhtmlxGantt.default.config.autosize = true;\n    //只读模式\n    _dhtmlxGantt.default.config.readonly = true;\n    //是否显示左侧树表格\n    _dhtmlxGantt.default.config.show_grid = true;\n    //表格列设置\n    _dhtmlxGantt.default.config.columns = [{\n      name: \"text\",\n      label: \"任务内容\",\n      width: \"120\",\n      align: \"center\",\n      tree: true\n    }, {\n      name: \"planStart\",\n      label: \"计划开始\",\n      width: \"100\",\n      align: \"center\"\n    }, {\n      name: \"planEnd\",\n      label: \"计划结束\",\n      width: \"100\",\n      align: \"center\"\n    }, {\n      name: \"actualStart\",\n      label: \"实际开始\",\n      width: \"100\",\n      align: \"center\"\n    }, {\n      name: \"actualEnd\",\n      label: \"实际结束\",\n      width: \"100\",\n      align: \"center\"\n    }];\n    //任务条上的文字大小 以及取消border自带样式\n    _dhtmlxGantt.default.templates.task_class = function () {\n      return \"firstLevelTask\";\n    };\n\n    // 初始化\n    _dhtmlxGantt.default.init(this.$refs.gantt);\n    // 数据解析\n    console.log(\"mounted\", this.tasks);\n    _dhtmlxGantt.default.parse(this.tasks);\n    let ziji = document.querySelectorAll(\".gantt_cell\");\n    console.log(\"ziji\", ziji);\n  },\n  methods: {\n    undapta() {},\n    initData(data) {\n      // 处理数据\n      let sucdate = data;\n      sucdate.map((item, index) => {\n        item.task = item.scheduleNameCn;\n        item.taskEn = item.scheduleNameEn;\n        item.planStart = item.scheduleBeginDate;\n        item.planEnd = item.scheduleEndDate;\n        item.actualStart = item.actualBeginDate;\n        item.actualEnd = item.actualEndDate;\n        item.parent = item.parentId;\n      });\n      let arr = sucdate;\n      let newArr = [];\n      arr.forEach((item, index) => {\n        let obj = this.getDate(item.planStart, item.planEnd, item.actualStart, item.actualEnd);\n        newArr.push({\n          id: item.id,\n          text: item.task,\n          textEn: item.taskEn,\n          start_date: new Date((0, _moment.default)(obj.minTime).format(\"YYYY-MM-DD\")),\n          end_date: new Date((0, _moment.default)(obj.maxTime).format(\"YYYY-MM-DD\")),\n          progress1: Math.abs(obj.progress1),\n          progress2: Math.abs(obj.progress2),\n          progress3: Math.abs(obj.progress3),\n          duration: obj.duration,\n          planStart: item.planStart,\n          planEnd: item.planEnd,\n          actualStart: item.actualStart,\n          actualEnd: item.actualEnd,\n          state: obj.state,\n          colorType: obj.colorType,\n          parent: item.parent\n        });\n      });\n      _dhtmlxGantt.default.clearAll();\n      this.tasks.data = newArr;\n      console.log(\"newarrrrrr\", newArr);\n      // 初始化\n      _dhtmlxGantt.default.init(this.$refs.gantt);\n      // 数据解析\n      _dhtmlxGantt.default.parse(this.tasks);\n    },\n    expandAllTasks() {\n      _dhtmlxGantt.default.eachTask(task => {\n        _dhtmlxGantt.default.open(task.id);\n      });\n    },\n    getDate(Atime, Btime, Ctime, Dtime) {\n      let obj = {};\n      let currentDate = new Date();\n      let year = currentDate.getFullYear();\n      let month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\n      let day = String(currentDate.getDate()).padStart(2, \"0\");\n      let formattedDate = `${year}-${month}-${day}`;\n      let arr = [Atime == null ? Atime = formattedDate : Atime, Btime == null ? Btime = formattedDate : Btime, Ctime == null ? (Ctime = Atime, Dtime = Btime) : Ctime, Dtime == null ? Dtime = Btime : Dtime];\n      let timeArr = [];\n      arr.forEach(item => {\n        timeArr.push(new Date(item));\n      });\n      let minTime = (0, _moment.default)(Math.min(...timeArr)).format(\"MM-DD-YYYY\");\n      let maxTime = (0, _moment.default)(Math.max(...timeArr)).format(\"YYYY-MM-DD\");\n      let duration = this.difference(minTime, maxTime);\n      let progress1 = 0;\n      let progress2 = 0;\n      let progress3 = 0;\n      let state = true;\n      let colorType = true;\n      if (Atime < Ctime && Ctime < Btime && Btime < Dtime) {\n        // console.log('12相交', index)\n        colorType = \"j12\";\n        progress2 = this.difference(Ctime, Btime) / duration;\n        progress1 = this.difference(Atime, Ctime) / duration;\n        progress3 = this.difference(Btime, Dtime) / duration;\n      } else if (Ctime > Atime && Btime == Dtime) {\n        // console.log('1包含2', index)\n        colorType = \"b121\";\n        state = true;\n        progress2 = this.difference(Ctime, Dtime) / duration;\n        progress1 = this.difference(Atime, Ctime) / duration;\n        progress3 = this.difference(Dtime, Btime) / duration;\n      } else if (Atime > Ctime && Dtime == Btime) {\n        colorType = \"b121s\";\n        state = true;\n        progress2 = this.difference(Atime, Btime) / duration;\n        progress1 = this.difference(Ctime, Atime) / duration;\n        progress3 = this.difference(Btime, Dtime) / duration;\n      } else if (Btime > Ctime && Btime >= Dtime && Ctime >= Atime && Dtime > Atime) {\n        // console.log('1包含2', index)\n        colorType = \"b12\";\n        state = true;\n        progress2 = this.difference(Ctime, Dtime) / duration;\n        progress1 = this.difference(Atime, Ctime) / duration;\n        progress3 = this.difference(Dtime, Btime) / duration;\n      } else if (Dtime >= Btime && Dtime > Atime && Atime == Ctime && Btime > Ctime) {\n        // console.log('2包含1', index)\n        colorType = \"b21\";\n        state = true;\n        progress2 = this.difference(Atime, Btime) / duration;\n        progress1 = this.difference(Ctime, Atime) / duration;\n        progress3 = this.difference(Btime, Dtime) / duration;\n      } else if (Btime > Dtime && Dtime > Atime && Atime > Ctime) {\n        // console.log('21相交', index)\n        colorType = \"j21\";\n        state = true;\n        progress2 = this.difference(Atime, Dtime) / duration;\n        progress1 = this.difference(Ctime, Atime) / duration;\n        progress3 = this.difference(Dtime, Btime) / duration;\n      } else if (Btime < Ctime) {\n        // console.log('12相离')\n        colorType = \"l12\";\n        state = true;\n        progress2 = this.difference(Btime, Ctime) / duration;\n        progress1 = this.difference(Atime, Btime) / duration;\n        progress3 = this.difference(Ctime, Dtime) / duration;\n      } else if (Dtime > Btime && Atime > Ctime) {\n        colorType = \"l12s\";\n        state = true;\n        progress2 = this.difference(Dtime, Atime) / duration;\n        progress3 = this.difference(Atime, Btime) / duration;\n        progress1 = this.difference(Ctime, Dtime) / duration;\n      } else if (Dtime < Atime) {\n        // console.log('21相离')\n        colorType = \"l21\";\n        state = true;\n        progress2 = this.difference(Dtime, Atime) / duration;\n        progress3 = this.difference(Atime, Btime) / duration;\n        progress1 = this.difference(Ctime, Dtime) / duration;\n      } else if (Dtime == Btime && Ctime == Atime) {\n        colorType = \"ts12\";\n        // colorType = \"l21\";\n        state = false;\n        progress2 = this.difference(Btime, Atime) / duration;\n        progress3 = this.difference(Atime, Btime) / duration;\n        progress1 = this.difference(Btime, Atime) / duration;\n      } else if (Dtime > Btime && Ctime == Btime) {\n        colorType = \"ts13\";\n        // colorType = \"l21\";\n        state = true;\n        progress2 = this.difference(Atime, Btime) / duration;\n        progress1 = this.difference(Ctime, Atime) / duration;\n        progress3 = this.difference(Btime, Dtime) / duration;\n      } else {\n        colorType = \"one\";\n        console.log(\"状态错误\");\n      }\n      obj = {\n        state: state,\n        minTime: minTime,\n        maxTime: maxTime,\n        duration: duration * 1,\n        progress1: progress1 * 1,\n        progress2: progress2 * 1,\n        progress3: progress3 * 1,\n        colorType: colorType\n      };\n      return obj;\n    },\n    difference(beginTime, Dtime) {\n      var dateBegin = new Date(beginTime);\n      var dateEnd = new Date(Dtime);\n      var dateDiff = dateEnd.getTime() - dateBegin.getTime(); //时间差的毫秒数\n      var dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000)); //计算出相差天数\n      return dayDiff;\n    }\n  }\n};\nexports.default = _default;","map":{"version":3,"names":["_moment","_interopRequireDefault","require","_dhtmlxGantt","_default","name","data","tasks","mounted","arr","id","nbProjectId","projectVesselId","vesselNameCn","vesselNameEn","parentId","dispNo","scheduleNameCn","scheduleNameEn","scheduleBeginDate","scheduleEndDate","actualBeginDate","actualEndDate","stageCode","completedPercent","scheduleRemark","fileIds","businessCode","currentDate","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","formattedDate","console","log","initData","gantt","config","show_progress","open_tree_initially","indent","grid_width","percenToString","num","Math","floor","renderLabel","progress","type","state","px","block","leftpx","falge","relWidth","cssClass","templates","task_text","start","end","task","colorType","progress1","progress2","progress3","actualStart","plugins","marker","tooltip","dateToStr","date","date_to_str","task_date","today","addMarker","start_date","css","text","moment","format","title","tooltip_text","planStart","planEnd","actualEnd","scale_unit","step","date_scale","subscales","unit","scale_height","i18n","setLocale","autosize","readonly","show_grid","columns","label","width","align","tree","task_class","init","$refs","parse","ziji","document","querySelectorAll","methods","undapta","sucdate","map","item","index","taskEn","parent","newArr","forEach","obj","push","textEn","minTime","end_date","maxTime","abs","duration","clearAll","expandAllTasks","eachTask","open","Atime","Btime","Ctime","Dtime","timeArr","min","max","difference","beginTime","dateBegin","dateEnd","dateDiff","getTime","dayDiff","exports","default"],"sources":["src/views/subpages/Ganttchart/index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div class=\"legend\">\r\n        <div class=\"legendBox\">\r\n          <div class=\"legendSml legendColor1\"></div>\r\n          <div>{{ $t('message.time') }}</div>\r\n        </div>\r\n        <div class=\"legendBox\">\r\n          <div class=\"legendSml legendColor2\"></div>\r\n          <div>实际时间</div>\r\n        </div>\r\n        <div class=\"legendBox\">\r\n          <div class=\"legendSml legendColor3\"></div>\r\n          <div>超出时间</div>\r\n        </div>\r\n      </div>\r\n      <!-- <button @click=\"undapta()\">更新数据</button> -->\r\n  \r\n      <div ref=\"gantt\" class=\"left-container\" />\r\n    </div>\r\n  </template>\r\n  <script>\r\n  import moment from \"moment\"; // moment格式化时间\r\n  import gantt from \"dhtmlx-gantt\"; // 引入模块\r\n  import \"dhtmlx-gantt/codebase/dhtmlxgantt.css\"; //皮肤\r\n  \r\n  export default {\r\n    name: \"gantt\",\r\n    data() {\r\n      return {\r\n        tasks: {\r\n          data: [],\r\n        },\r\n      };\r\n    },\r\n    mounted() {\r\n      let arr = [\r\n        { //没有实际结束   实际开始在计划之前（不显示） b121\r\n          id: \"7086894358414229504\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 1,\r\n          scheduleNameCn: \"签约\",\r\n          scheduleNameEn: \"Sign\",\r\n          scheduleBeginDate: \"2023-07-01\",\r\n          scheduleEndDate: \"2024-01-24\",\r\n          actualBeginDate: \"2023-06-05\",\r\n          actualEndDate:null,\r\n          stageCode: \"VESSEL_SCHEDULE_1\",\r\n          completedPercent: 22,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//有实际结束   实际开始在计划之后（显示） b12\r\n          id: \"7086894728481865728\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"7086894358414229504\",\r\n          dispNo: null,\r\n          scheduleNameCn: \"采购设备\",\r\n          scheduleNameEn: \"caigoushebei\",\r\n          scheduleBeginDate: \"2023-07-01\",\r\n          scheduleEndDate: \"2024-01-24\",\r\n          actualBeginDate:\"2023-07-05\",\r\n          actualEndDate:\"2023-07-28\",\r\n          stageCode: \"\",\r\n          completedPercent: 13,\r\n          scheduleRemark: \"\",\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//有实际结束   实际开始在计划之前（显示） j21\r\n          id: \"7088381175781130240\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"7086894358414229504\",\r\n          dispNo: null,\r\n          scheduleNameCn: \"审图\",\r\n          scheduleNameEn: \"Plan Approval\",\r\n          scheduleBeginDate: \"2023-07-01\",\r\n          scheduleEndDate: \"2024-02-24\",\r\n          actualBeginDate:\"2023-06-05\",\r\n          actualEndDate:\"2023-07-28\",\r\n          stageCode: \"\",\r\n          completedPercent: 31,\r\n          scheduleRemark: \"\",\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//有实际结束   实际开始在计划之后（显示） j21\r\n          id: \"7086894358431006720\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 2,\r\n          scheduleNameCn: \"开工\",\r\n          scheduleNameEn: \"Start\",\r\n          scheduleBeginDate: \"2023-07-01\",\r\n          scheduleEndDate: \"2023-08-24\",\r\n          actualBeginDate:\"2023-07-10\",\r\n          actualEndDate:\"2023-09-28\",\r\n          stageCode: \"VESSEL_SCHEDULE_2\",\r\n          completedPercent: 6,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//有实际结束   实际开始(相等于计划开始)在计划之后（显示） \"b21\"\r\n          id: \"7088384223853150208\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"7086894358431006720\",\r\n          dispNo: null,\r\n          scheduleNameCn: \"加工\",\r\n          scheduleNameEn: \"Steel Fabrication\",\r\n          scheduleBeginDate: \"2023-07-01\",\r\n          scheduleEndDate: \"2023-08-24\",\r\n          actualBeginDate:\"2023-07-01\",\r\n          actualEndDate:\"2023-12-28\",\r\n          stageCode: \"\",\r\n          completedPercent: 6,\r\n          scheduleRemark: \"\",\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {///有实际结束   对应相等\r\n          id: \"7088384248909922304\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"7086894358431006720\",\r\n          dispNo: null,\r\n          scheduleNameCn: \"完善\",\r\n          scheduleNameEn: \"Steel Fabrication\",\r\n          scheduleBeginDate: \"2023-07-01\",\r\n          scheduleEndDate: \"2023-08-24\",\r\n          actualBeginDate:\"2023-07-01\",\r\n          actualEndDate:\"2023-08-24\",\r\n          stageCode: \"\",\r\n          completedPercent: 6,\r\n          scheduleRemark: \"\",\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//有实际结束   计划 包含实际 \"b12\"\r\n          id: \"7086894358472949760\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 3,\r\n          scheduleNameCn: \"审核\",\r\n          scheduleNameEn: \"Keel\",\r\n          scheduleBeginDate: \"2023-08-01\",\r\n          scheduleEndDate: \"2024-08-24\",\r\n          actualBeginDate:\"2023-08-28\",\r\n          actualEndDate:\"2023-12-24\",\r\n          stageCode: \"VESSEL_SCHEDULE_3\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//没有实际   计划 包含实际 b12\r\n          id: \"7086894358485532672\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 4,\r\n          scheduleNameCn: \"试用\",\r\n          scheduleNameEn: \"Launch\",\r\n          scheduleBeginDate: \"2023-08-01\",\r\n          scheduleEndDate: \"2024-08-24\",\r\n          actualBeginDate:null,\r\n          actualEndDate:null,\r\n          stageCode: \"VESSEL_SCHEDULE_4\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//有实际   实际开始  大于   计划开始 b121\r\n          id: \"7086894358502309888\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 5,\r\n          scheduleNameCn: \"交付\",\r\n          scheduleNameEn: \"Voyage\",\r\n          scheduleBeginDate: \"2023-08-01\",\r\n          scheduleEndDate: \"2024-08-24\",\r\n          actualBeginDate:\"2023-08-28\",\r\n          actualEndDate:null,\r\n          stageCode: \"VESSEL_SCHEDULE_5\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//没有相交时间  实际在后  l12\r\n          id: \"7086894358544252928\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 6,\r\n          scheduleNameCn: \"使用中\",\r\n          scheduleNameEn: \"Delivery\",\r\n          scheduleBeginDate: \"2023-05-01\",\r\n          scheduleEndDate: \"2023-06-24\",\r\n          actualBeginDate:\"2023-08-28\",\r\n          actualEndDate:\"2024-10-28\",\r\n          stageCode: \"VESSEL_SCHEDULE_6\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//没有相交时间  实际在前  l21\r\n          id: \"70868943585442529288948\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 6,\r\n          scheduleNameCn: \"反馈\",\r\n          scheduleNameEn: \"Delivery\",\r\n          scheduleBeginDate: \"2023-12-01\",\r\n          scheduleEndDate: \"2024-06-24\",\r\n          actualBeginDate:\"2023-08-28\",\r\n          actualEndDate:\"2023-10-28\",\r\n          stageCode: \"VESSEL_SCHEDULE_6\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//两端超出  l12s\r\n          id: \"7086894358544252928894887478\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 6,\r\n          scheduleNameCn: \"结项\",\r\n          scheduleNameEn: \"Delivery\",\r\n          scheduleBeginDate: \"2023-8-01\",\r\n          scheduleEndDate: \"2023-10-24\",\r\n          actualBeginDate:\"2023-06-28\",\r\n          actualEndDate:\"2023-12-28\",\r\n          stageCode: \"VESSEL_SCHEDULE_6\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n        {//实际开始  和  计划结束相等  l12s\r\n          id: \"7086894358544252928894887478\",\r\n          nbProjectId: \"7086894357860581376\",\r\n          projectVesselId: \"7086894358300983296\",\r\n          vesselNameCn: \"凯勇\",\r\n          vesselNameEn: \"NEW VALOR\",\r\n          parentId: \"0\",\r\n          dispNo: 6,\r\n          scheduleNameCn: \"结项\",\r\n          scheduleNameEn: \"Delivery\",\r\n          scheduleBeginDate: \"2023-8-01\",\r\n          scheduleEndDate: \"2023-8-16\",\r\n          actualBeginDate:\"2023-8-16\",\r\n          actualEndDate:\"2023-8-24\",\r\n          stageCode: \"VESSEL_SCHEDULE_6\",\r\n          completedPercent: 0,\r\n          scheduleRemark: null,\r\n          fileIds: null,\r\n          businessCode: null,\r\n        },\r\n      ];\r\n      let currentDate = new Date();\r\n        let year = currentDate.getFullYear();\r\n        let month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\r\n        let day = String(currentDate.getDate()).padStart(2, \"0\");\r\n  \r\n        let formattedDate = `${year}-${month}-${day}`;\r\n        console.log('formattedDate',formattedDate);\r\n      \r\n      this.initData(arr);\r\n  \r\n      gantt.config.show_progress = false;\r\n      gantt.config.open_tree_initially = true; //默认展开子级\r\n      // 设置左侧树子任务缩进和展开\r\n      gantt.config.indent = 30;\r\n      gantt.config.grid_width = 350;\r\n      \r\n      gantt.config.open_tree_initially = true;\r\n      function percenToString(num) {\r\n        return Math.floor(num * 100) + \"%\";\r\n      }\r\n  \r\n      // 设置每一部分的颜色\r\n      function renderLabel(progress, type, state, px, block, leftpx,falge) {\r\n        var relWidth = progress * 100;\r\n        var cssClass = \"custom_progress \";\r\n        if (type === 1) {\r\n          cssClass += \"nearly_done\";\r\n        } else if (type === 2) {\r\n          if (state) {\r\n            cssClass += \"in_progress\";\r\n          } else {\r\n            cssClass += \"in_progress_w\";\r\n          }\r\n        } else if (type === 3) {\r\n          cssClass += \"tshu\";\r\n        } else {\r\n          cssClass += \"idle\";\r\n        }\r\n        return (\r\n          \"<div class='\" +\r\n          cssClass +\r\n          \"' style='width:\" +\r\n          relWidth +\r\n          `%;height:25%;display:${\r\n            block ? \"block\" : \"inline-block\"\r\n          };margin-top:${px}px;margin-left:${leftpx * 100}%;display:${falge}'>` +\r\n          \"</div>\"\r\n        );\r\n      }\r\n   // 根据定义类型判断颜色顺序\r\n   gantt.templates.task_text = function (start, end, task) {\r\n        let colorType = task.colorType;\r\n        if (colorType === \"j12\" || colorType === \"one\") {\r\n          return (\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,0,true,0) +\r\n            renderLabel(task.progress2,3,task.state,-8,true,task.progress2) +\r\n            renderLabel(task.progress3 + task.progress2,2,task.state,10,false,task.progress1));\r\n        } else if (colorType === \"j21\") {\r\n          return (\r\n            renderLabel(task.progress1 + task.progress2,3,task.state,0,true,0) +\r\n            renderLabel(task.progress2+task.progress1, 2, task.state, 15, true, 0,) +\r\n            renderLabel(task.progress3 + task.progress2,1,task.state,-30,false,task.progress2)\r\n          );\r\n        }else if (colorType === \"b121\") {\r\n          return (\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,0,true,0,'block') +\r\n            renderLabel(task.progress2, 2, task.state, 15, true, task.progress1,'none') +\r\n            renderLabel(task.progress3 + task.progress2,1,task.state,-38,false,task.progress2,'none'));\r\n        }\r\n        else if (colorType === \"b121s\") {\r\n          return (\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,0,true,0,'block') +\r\n            renderLabel(task.progress2, 2, task.state, 15, true, task.progress1,'none') +\r\n            renderLabel(task.progress3 + task.progress2,1,task.state,-38,false,task.progress2,'none'));\r\n        }\r\n         else if (colorType === \"b12\") {\r\n          if(task.actualStart == null){\r\n            return (\r\n            renderLabel(task.progress3 + task.progress2+task.progress1,1,task.state,0,true,0,'block') +\r\n            renderLabel(task.progress2, 2, task.state, 15, true, task.progress1,'none') +\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,-38,false,task.progress2,'block'));\r\n          }else{\r\n            return (\r\n            renderLabel(task.progress3 + task.progress2+task.progress1,1,task.state,0,true,0,'block') +\r\n            renderLabel(task.progress2, 2, task.state, 15, true, task.progress1,'block') +\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,-38,false,task.progress2,'block'));\r\n          }\r\n         \r\n        } else if (colorType === \"b21\") {\r\n          return (\r\n            renderLabel(task.progress2, 1, task.state, 0, true,task.progress1) +\r\n            renderLabel(1 - task.progress2,3,task.state,-8,true,task.progress2,'block')+\r\n            renderLabel(task.progress2+task.progress3,2,task.state,10,false,0)\r\n            );\r\n        } else if (colorType === \"l12\") {\r\n          return (\r\n            renderLabel(task.progress1,1,task.state,0,true,0) +\r\n            renderLabel(task.progress3, 2, task.state, 15, true, task.progress2+task.progress1) +\r\n            renderLabel(1,3,task.state,-30,false,task.progress1));\r\n        } else if (colorType === \"l21\") {\r\n          return (\r\n            renderLabel(task.progress3, 1, task.state, 0, true,task.progress1+task.progress2) +\r\n            renderLabel(task.progress1, 2, task.state, 15, true, 0) +\r\n            renderLabel(task.progress2+task.progress1,3,task.state,-30,true,0));\r\n        }else if(colorType === \"l12s\"){\r\n          return (\r\n            renderLabel(task.progress3, 1, task.state, 0, true,task.progress1-task.progress2) +\r\n            renderLabel(task.progress1, 2, task.state, 15, true, 0) +\r\n            renderLabel(task.progress1-task.progress2,3,task.state,-30,true,0)+\r\n            renderLabel(task.progress1-task.progress3,3,task.state,-8,true,(task.progress1-task.progress2)+(task.progress3))\r\n            );\r\n        }\r\n         else if (colorType === \"ts12\") {\r\n          return (\r\n            // renderLabel(task.progress1, 1, task.state) +\r\n            // renderLabel(task.progress2, 2, task.state) +\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,0,false,0));\r\n        } else if (colorType == \"ts13\") {\r\n          renderLabel(1, 1, task.state, 0, true,task.progress1-task.progress2) \r\n          \r\n        } else {\r\n          return (\r\n            renderLabel(task.progress1 + task.progress2,1,task.state,0, true,0) +\r\n            renderLabel(task.progress2, 2, task.state, 15, true, task.progress2) +\r\n            renderLabel(task.progress3 + task.progress2,3,task.state,-38,false,task.progress2));\r\n        }\r\n      };\r\n      gantt.plugins({ marker: true, tooltip: true }); // 开启marker插件\r\n      var dateToStr = gantt.date.date_to_str(gantt.config.task_date);\r\n      var today = new Date();\r\n      // 添加固定时间线\r\n      gantt.addMarker({\r\n        start_date: today,\r\n        css: \"today\",\r\n        text: \"今日:\" + moment(new Date()).format(\"YYYY-MM-DD\"),\r\n        title: \"Today: \" + dateToStr(today),\r\n      });\r\n      // 提示框内容\r\n      gantt.templates.tooltip_text = function (start, end, task) {\r\n        return (\r\n          \"<b>任务内容:</b>\" +\r\n          task.text +\r\n          \"<br/><b>计划开始:</b> \" +\r\n          task.planStart +\r\n          \"<br/><b>计划结束:</b> \" +\r\n          task.planEnd +\r\n          \"<br/><b>实际开始:</b> \" +\r\n          task.actualStart +\r\n          \"<br/><b>实际结束:</b> \" +\r\n          task.actualEnd\r\n        );\r\n      };\r\n  \r\n      gantt.config.scale_unit = \"year\";\r\n      gantt.config.step = 1;\r\n      gantt.config.date_scale = \"%Y\";\r\n      //当右侧不止显示年份时，可以添加展示月日，添加一个就加一行\r\n      gantt.config.subscales = [{ unit: \"month\", step: 1, date: \"%m\" }];\r\n      //甘特图右侧表头的高度\r\n      gantt.config.scale_height = 80;\r\n      //使用中文\r\n      gantt.i18n.setLocale(\"cn\");\r\n      //自适应甘特图的尺寸大小, 使得在不出现滚动条的情况下, 显示全部任务\r\n      gantt.config.autosize = true;\r\n      //只读模式\r\n      gantt.config.readonly = true;\r\n      //是否显示左侧树表格\r\n      gantt.config.show_grid = true;\r\n      //表格列设置\r\n      gantt.config.columns = [\r\n        {\r\n          name: \"text\",\r\n          label: \"任务内容\",\r\n          width: \"120\",\r\n          align: \"center\",\r\n          tree: true,\r\n        },\r\n        { name: \"planStart\", label: \"计划开始\", width: \"100\", align: \"center\" },\r\n        { name: \"planEnd\", label: \"计划结束\", width: \"100\", align: \"center\" },\r\n        { name: \"actualStart\", label: \"实际开始\", width: \"100\", align: \"center\" },\r\n        { name: \"actualEnd\", label: \"实际结束\", width: \"100\", align: \"center\" },\r\n      ];\r\n      //任务条上的文字大小 以及取消border自带样式\r\n      gantt.templates.task_class = function () {\r\n        return \"firstLevelTask\";\r\n      };\r\n        \r\n      // 初始化\r\n      gantt.init(this.$refs.gantt);\r\n      // 数据解析\r\n      console.log(\"mounted\", this.tasks);\r\n      gantt.parse(this.tasks);\r\n      let ziji = document.querySelectorAll(\".gantt_cell\");\r\n      console.log(\"ziji\", ziji);\r\n    },\r\n    methods: {\r\n      undapta() {},\r\n   initData(data) {\r\n        // 处理数据\r\n        let sucdate = data;\r\n        sucdate.map((item, index) => {\r\n          item.task = item.scheduleNameCn;\r\n          item.taskEn = item.scheduleNameEn;\r\n          item.planStart = item.scheduleBeginDate;\r\n          item.planEnd = item.scheduleEndDate;\r\n          item.actualStart = item.actualBeginDate;\r\n          item.actualEnd = item.actualEndDate;\r\n          item.parent = item.parentId;\r\n        });\r\n        let arr = sucdate;\r\n        let newArr = [];\r\n        arr.forEach((item, index) => {\r\n          let obj = this.getDate(\r\n            item.planStart,\r\n            item.planEnd,\r\n            item.actualStart,\r\n            item.actualEnd\r\n          );\r\n          newArr.push({\r\n            id: item.id,\r\n            text: item.task,\r\n            textEn: item.taskEn,\r\n            start_date: new Date(moment(obj.minTime).format(\"YYYY-MM-DD\")),\r\n            end_date: new Date(moment(obj.maxTime).format(\"YYYY-MM-DD\")),\r\n            progress1: Math.abs(obj.progress1),\r\n            progress2: Math.abs(obj.progress2),\r\n            progress3: Math.abs(obj.progress3),\r\n            duration: obj.duration,\r\n  \r\n            planStart: item.planStart,\r\n            planEnd: item.planEnd,\r\n            actualStart: item.actualStart,\r\n            actualEnd: item.actualEnd,\r\n            state: obj.state,\r\n            colorType: obj.colorType,\r\n            parent: item.parent,\r\n          });\r\n        });\r\n        gantt.clearAll();\r\n        this.tasks.data = newArr;\r\n        console.log(\"newarrrrrr\", newArr);\r\n        // 初始化\r\n        gantt.init(this.$refs.gantt);\r\n        // 数据解析\r\n        gantt.parse(this.tasks);\r\n      },\r\n      expandAllTasks() {\r\n        gantt.eachTask((task) => {\r\n          gantt.open(task.id);\r\n        });\r\n      },\r\n      getDate(Atime, Btime, Ctime, Dtime) {\r\n        let obj = {};\r\n        let currentDate = new Date();\r\n        let year = currentDate.getFullYear();\r\n        let month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\r\n        let day = String(currentDate.getDate()).padStart(2, \"0\");\r\n  \r\n        let formattedDate = `${year}-${month}-${day}`;\r\n  \r\n        let arr = [\r\n          Atime == null ? (Atime = formattedDate) : Atime,\r\n          Btime == null ? (Btime = formattedDate) : Btime,\r\n          Ctime == null ? ((Ctime = Atime), (Dtime = Btime)) : Ctime,\r\n          Dtime == null ? (Dtime = Btime) : Dtime,\r\n        ];\r\n        let timeArr = [];\r\n        arr.forEach((item) => {\r\n          timeArr.push(new Date(item));\r\n        });\r\n        let minTime = moment(Math.min(...timeArr)).format(\"MM-DD-YYYY\");\r\n        let maxTime = moment(Math.max(...timeArr)).format(\"YYYY-MM-DD\");\r\n        let duration = this.difference(minTime, maxTime);\r\n  \r\n        let progress1 = 0;\r\n        let progress2 = 0;\r\n        let progress3 = 0;\r\n        let state = true;\r\n        let colorType = true;\r\n  \r\n        if (Atime < Ctime && Ctime < Btime && Btime < Dtime) {\r\n          // console.log('12相交', index)\r\n          colorType = \"j12\";\r\n          progress2 = this.difference(Ctime, Btime) / duration;\r\n          progress1 = this.difference(Atime, Ctime) / duration;\r\n          progress3 = this.difference(Btime, Dtime) / duration;\r\n        }else if (\r\n          Ctime>Atime&&Btime == Dtime ) {\r\n          // console.log('1包含2', index)\r\n          colorType = \"b121\";\r\n          state = true;\r\n          progress2 = this.difference(Ctime, Dtime) / duration;\r\n          progress1 = this.difference(Atime, Ctime) / duration;\r\n          progress3 = this.difference(Dtime, Btime) / duration;\r\n        }else if( Atime > Ctime && Dtime == Btime ){\r\n            colorType = \"b121s\";\r\n          state = true;\r\n          progress2 = this.difference(Atime, Btime) / duration;\r\n          progress1 = this.difference(Ctime, Atime) / duration;\r\n          progress3 = this.difference(Btime, Dtime) / duration;\r\n        }\r\n        else if (\r\n          Btime > Ctime &&\r\n          Btime >= Dtime &&\r\n          Ctime >= Atime &&\r\n          Dtime > Atime\r\n        ) {\r\n          // console.log('1包含2', index)\r\n          colorType = \"b12\";\r\n          state = true;\r\n          progress2 = this.difference(Ctime, Dtime) / duration;\r\n          progress1 = this.difference(Atime, Ctime) / duration;\r\n          progress3 = this.difference(Dtime, Btime) / duration;\r\n        } else if (\r\n          Dtime >= Btime &&\r\n          Dtime > Atime &&\r\n          Atime == Ctime &&\r\n          Btime > Ctime\r\n        ) {\r\n          // console.log('2包含1', index)\r\n          colorType = \"b21\";\r\n          state = true;\r\n          progress2 = this.difference(Atime, Btime) / duration;\r\n          progress1 = this.difference(Ctime, Atime) / duration;\r\n          progress3 = this.difference(Btime, Dtime) / duration;\r\n        }\r\n        \r\n        else if (Btime > Dtime && Dtime > Atime && Atime > Ctime) {\r\n          // console.log('21相交', index)\r\n          colorType = \"j21\";\r\n          state = true;\r\n          progress2 = this.difference(Atime, Dtime) / duration;\r\n          progress1 = this.difference(Ctime, Atime) / duration;\r\n          progress3 = this.difference(Dtime, Btime) / duration;\r\n        } else if (Btime < Ctime) {\r\n          // console.log('12相离')\r\n          colorType = \"l12\";\r\n          state = true;\r\n          progress2 = this.difference(Btime, Ctime) / duration;\r\n          progress1 = this.difference(Atime, Btime) / duration;\r\n          progress3 = this.difference(Ctime, Dtime) / duration;\r\n        }else if(Dtime > Btime && Atime > Ctime){\r\n          colorType = \"l12s\";\r\n          state = true;\r\n          progress2 = this.difference(Dtime, Atime) / duration;\r\n          progress3 = this.difference(Atime, Btime) / duration;\r\n          progress1 = this.difference(Ctime, Dtime) / duration;\r\n        }\r\n         else if (Dtime < Atime) {\r\n          // console.log('21相离')\r\n          colorType = \"l21\";\r\n          state = true;\r\n          progress2 = this.difference(Dtime, Atime) / duration;\r\n          progress3 = this.difference(Atime, Btime) / duration;\r\n          progress1 = this.difference(Ctime, Dtime) / duration;\r\n        } else if (Dtime == Btime && Ctime == Atime) {\r\n          colorType = \"ts12\";\r\n          // colorType = \"l21\";\r\n          state = false;\r\n          progress2 = this.difference(Btime, Atime) / duration;\r\n          progress3 = this.difference(Atime, Btime) / duration;\r\n          progress1 = this.difference(Btime, Atime) / duration;\r\n        } else if (Dtime > Btime && Ctime == Btime) {\r\n          colorType = \"ts13\";\r\n          // colorType = \"l21\";\r\n          state = true;\r\n          progress2 = this.difference(Atime, Btime) / duration;\r\n          progress1 = this.difference(Ctime, Atime) / duration;\r\n          progress3 = this.difference(Btime, Dtime) / duration;\r\n        } else {\r\n          colorType = \"one\";\r\n          console.log(\"状态错误\");\r\n        }\r\n        obj = {\r\n          state: state,\r\n          minTime: minTime,\r\n          maxTime: maxTime,\r\n          duration: duration * 1,\r\n          progress1: progress1 * 1,\r\n          progress2: progress2 * 1,\r\n          progress3: progress3 * 1,\r\n          colorType: colorType,\r\n        };\r\n        return obj;\r\n      },\r\n      difference(beginTime, Dtime) {\r\n        var dateBegin = new Date(beginTime);\r\n        var dateEnd = new Date(Dtime);\r\n        var dateDiff = dateEnd.getTime() - dateBegin.getTime(); //时间差的毫秒数\r\n        var dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000)); //计算出相差天数\r\n        return dayDiff;\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  <style lang=\"scss\">\r\n  html,\r\n  body {\r\n    height: 100%;\r\n    padding: 0px;\r\n    margin: 0px;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  .legend {\r\n    padding: 10px;\r\n    display: flex;\r\n  \r\n    .legendBox {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-right: 20px;\r\n  \r\n      .legendSml {\r\n        width: 30px;\r\n        height: 16px;\r\n        border-radius: 5px;\r\n        margin-right: 4px;\r\n      }\r\n  \r\n      .legendColor1 {\r\n        background: #01aff4;\r\n      }\r\n      .legendColor2 {\r\n        background: #0169bd;\r\n      }\r\n      .legendColor3 {\r\n        background:#adb837;\r\n      }\r\n    }\r\n  }\r\n  .tab_attachments {\r\n    width: 100%;\r\n  }\r\n   .gantt_task_content {\r\n    position: relative;\r\n    // display: flex;\r\n    background-color: white;\r\n  }\r\n  \r\n   .gantt_task_line {\r\n    background: #0169bd;\r\n  }\r\n  \r\n   .custom_progress {\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    text-align: center;\r\n    height: 100%;\r\n  }\r\n  .nearly_done {\r\n    background-color: #01aff4 !important;\r\n  }\r\n  \r\n  .in_progress {\r\n    //相交时间\r\n    background-color: #0169bd !important;\r\n  }\r\n  \r\n  .in_progress_w {\r\n    background-color: #01aff4 !important;\r\n  }\r\n   .tshu {\r\n    background-color: #adb837 !important;\r\n  }\r\n  .idle {\r\n    background: #01aff4 !important;\r\n  }\r\n  .firstLevelTask {\r\n    border: none;\r\n  }\r\n  \r\n  .secondLevelTask {\r\n    border: none;\r\n  }\r\n  \r\n  .left-container {\r\n    height: 600px;\r\n  }\r\n  .form_box {\r\n    height: 100%;\r\n    background-color: #fff;\r\n  }\r\n  ::v-deep.gantt_tooltip {\r\n    padding: 10px;\r\n    position: absolute;\r\n    z-index: 10000;\r\n    white-space: nowrap;\r\n  }\r\n  ::v-deep .gantt_tooltip {\r\n    z-index: 19999; /* 设置一个较高的z-index值 */\r\n  }\r\n  </style>\r\n  \r\n  "],"mappings":";;;;;;;;AAsBA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AACAA,OAAA;AAFA;AACA;AACA;AAAA,IAAAE,QAAA,GAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;QACAD,IAAA;MACA;IACA;EACA;EACAE,QAAA;IACA,IAAAC,GAAA,IACA;MAAA;MACAC,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,GACA;MAAA;MACAjB,EAAA;MACAC,WAAA;MACAC,eAAA;MACAC,YAAA;MACAC,YAAA;MACAC,QAAA;MACAC,MAAA;MACAC,cAAA;MACAC,cAAA;MACAC,iBAAA;MACAC,eAAA;MACAC,eAAA;MACAC,aAAA;MACAC,SAAA;MACAC,gBAAA;MACAC,cAAA;MACAC,OAAA;MACAC,YAAA;IACA,EACA;IACA,IAAAC,WAAA,OAAAC,IAAA;IACA,IAAAC,IAAA,GAAAF,WAAA,CAAAG,WAAA;IACA,IAAAC,KAAA,GAAAC,MAAA,CAAAL,WAAA,CAAAM,QAAA,QAAAC,QAAA;IACA,IAAAC,GAAA,GAAAH,MAAA,CAAAL,WAAA,CAAAS,OAAA,IAAAF,QAAA;IAEA,IAAAG,aAAA,MAAAR,IAAA,IAAAE,KAAA,IAAAI,GAAA;IACAG,OAAA,CAAAC,GAAA,kBAAAF,aAAA;IAEA,KAAAG,QAAA,CAAAhC,GAAA;IAEAiC,oBAAA,CAAAC,MAAA,CAAAC,aAAA;IACAF,oBAAA,CAAAC,MAAA,CAAAE,mBAAA;IACA;IACAH,oBAAA,CAAAC,MAAA,CAAAG,MAAA;IACAJ,oBAAA,CAAAC,MAAA,CAAAI,UAAA;IAEAL,oBAAA,CAAAC,MAAA,CAAAE,mBAAA;IACA,SAAAG,eAAAC,GAAA;MACA,OAAAC,IAAA,CAAAC,KAAA,CAAAF,GAAA;IACA;;IAEA;IACA,SAAAG,YAAAC,QAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAC,EAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,KAAA;MACA,IAAAC,QAAA,GAAAP,QAAA;MACA,IAAAQ,QAAA;MACA,IAAAP,IAAA;QACAO,QAAA;MACA,WAAAP,IAAA;QACA,IAAAC,KAAA;UACAM,QAAA;QACA;UACAA,QAAA;QACA;MACA,WAAAP,IAAA;QACAO,QAAA;MACA;QACAA,QAAA;MACA;MACA,OACA,iBACAA,QAAA,GACA,oBACAD,QAAA,GACA,wBACAH,KAAA,2BACA,eAAAD,EAAA,kBAAAE,MAAA,mBAAAC,KAAA,OACA;IAEA;IACA;IACAjB,oBAAA,CAAAoB,SAAA,CAAAC,SAAA,aAAAC,KAAA,EAAAC,GAAA,EAAAC,IAAA;MACA,IAAAC,SAAA,GAAAD,IAAA,CAAAC,SAAA;MACA,IAAAA,SAAA,cAAAA,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,gBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAG,SAAA,IACAjB,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,aAAAW,IAAA,CAAAE,SAAA;MACA,WAAAD,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,gBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA,iBACAH,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAG,SAAA;MAEA,WAAAF,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,yBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAE,SAAA,YACAhB,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAG,SAAA;MACA,OACA,IAAAF,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,yBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAE,SAAA,YACAhB,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAG,SAAA;MACA,OACA,IAAAF,SAAA;QACA,IAAAD,IAAA,CAAAK,WAAA;UACA,OACAnB,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA,yBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAE,SAAA,YACAhB,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAG,SAAA;QACA;UACA,OACAjB,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA,yBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAE,SAAA,aACAhB,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAG,SAAA;QACA;MAEA,WAAAF,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,WAAAW,IAAA,CAAAE,SAAA,IACAhB,WAAA,KAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAG,SAAA,aACAjB,WAAA,CAAAc,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAI,SAAA,KAAAJ,IAAA,CAAAX,KAAA;MAEA,WAAAY,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA,gBACAH,WAAA,CAAAc,IAAA,CAAAI,SAAA,KAAAJ,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAE,SAAA,IACAhB,WAAA,OAAAc,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAE,SAAA;MACA,WAAAD,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAI,SAAA,KAAAJ,IAAA,CAAAX,KAAA,WAAAW,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,IACAjB,WAAA,CAAAc,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA,iBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA;MACA,WAAAY,SAAA;QACA,OACAf,WAAA,CAAAc,IAAA,CAAAI,SAAA,KAAAJ,IAAA,CAAAX,KAAA,WAAAW,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,IACAjB,WAAA,CAAAc,IAAA,CAAAE,SAAA,KAAAF,IAAA,CAAAX,KAAA,iBACAH,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,kBACAH,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAI,SAAA,KAAAJ,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,GAAAH,IAAA,CAAAI,SAAA;MAEA,OACA,IAAAH,SAAA;QACA;UACA;UACA;UACAf,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA;QAAA;MACA,WAAAY,SAAA;QACAf,WAAA,OAAAc,IAAA,CAAAX,KAAA,WAAAW,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA;MAEA;QACA,OACAjB,WAAA,CAAAc,IAAA,CAAAE,SAAA,GAAAF,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,gBACAH,WAAA,CAAAc,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,YAAAW,IAAA,CAAAG,SAAA,IACAjB,WAAA,CAAAc,IAAA,CAAAI,SAAA,GAAAJ,IAAA,CAAAG,SAAA,KAAAH,IAAA,CAAAX,KAAA,cAAAW,IAAA,CAAAG,SAAA;MACA;IACA;IACA3B,oBAAA,CAAA8B,OAAA;MAAAC,MAAA;MAAAC,OAAA;IAAA;IACA,IAAAC,SAAA,GAAAjC,oBAAA,CAAAkC,IAAA,CAAAC,WAAA,CAAAnC,oBAAA,CAAAC,MAAA,CAAAmC,SAAA;IACA,IAAAC,KAAA,OAAAlD,IAAA;IACA;IACAa,oBAAA,CAAAsC,SAAA;MACAC,UAAA,EAAAF,KAAA;MACAG,GAAA;MACAC,IAAA,cAAAC,eAAA,MAAAvD,IAAA,IAAAwD,MAAA;MACAC,KAAA,cAAAX,SAAA,CAAAI,KAAA;IACA;IACA;IACArC,oBAAA,CAAAoB,SAAA,CAAAyB,YAAA,aAAAvB,KAAA,EAAAC,GAAA,EAAAC,IAAA;MACA,OACA,iBACAA,IAAA,CAAAiB,IAAA,GACA,uBACAjB,IAAA,CAAAsB,SAAA,GACA,uBACAtB,IAAA,CAAAuB,OAAA,GACA,uBACAvB,IAAA,CAAAK,WAAA,GACA,uBACAL,IAAA,CAAAwB,SAAA;IAEA;IAEAhD,oBAAA,CAAAC,MAAA,CAAAgD,UAAA;IACAjD,oBAAA,CAAAC,MAAA,CAAAiD,IAAA;IACAlD,oBAAA,CAAAC,MAAA,CAAAkD,UAAA;IACA;IACAnD,oBAAA,CAAAC,MAAA,CAAAmD,SAAA;MAAAC,IAAA;MAAAH,IAAA;MAAAhB,IAAA;IAAA;IACA;IACAlC,oBAAA,CAAAC,MAAA,CAAAqD,YAAA;IACA;IACAtD,oBAAA,CAAAuD,IAAA,CAAAC,SAAA;IACA;IACAxD,oBAAA,CAAAC,MAAA,CAAAwD,QAAA;IACA;IACAzD,oBAAA,CAAAC,MAAA,CAAAyD,QAAA;IACA;IACA1D,oBAAA,CAAAC,MAAA,CAAA0D,SAAA;IACA;IACA3D,oBAAA,CAAAC,MAAA,CAAA2D,OAAA,IACA;MACAjG,IAAA;MACAkG,KAAA;MACAC,KAAA;MACAC,KAAA;MACAC,IAAA;IACA,GACA;MAAArG,IAAA;MAAAkG,KAAA;MAAAC,KAAA;MAAAC,KAAA;IAAA,GACA;MAAApG,IAAA;MAAAkG,KAAA;MAAAC,KAAA;MAAAC,KAAA;IAAA,GACA;MAAApG,IAAA;MAAAkG,KAAA;MAAAC,KAAA;MAAAC,KAAA;IAAA,GACA;MAAApG,IAAA;MAAAkG,KAAA;MAAAC,KAAA;MAAAC,KAAA;IAAA,EACA;IACA;IACA/D,oBAAA,CAAAoB,SAAA,CAAA6C,UAAA;MACA;IACA;;IAEA;IACAjE,oBAAA,CAAAkE,IAAA,MAAAC,KAAA,CAAAnE,KAAA;IACA;IACAH,OAAA,CAAAC,GAAA,iBAAAjC,KAAA;IACAmC,oBAAA,CAAAoE,KAAA,MAAAvG,KAAA;IACA,IAAAwG,IAAA,GAAAC,QAAA,CAAAC,gBAAA;IACA1E,OAAA,CAAAC,GAAA,SAAAuE,IAAA;EACA;EACAG,OAAA;IACAC,QAAA;IACA1E,SAAAnC,IAAA;MACA;MACA,IAAA8G,OAAA,GAAA9G,IAAA;MACA8G,OAAA,CAAAC,GAAA,EAAAC,IAAA,EAAAC,KAAA;QACAD,IAAA,CAAApD,IAAA,GAAAoD,IAAA,CAAArG,cAAA;QACAqG,IAAA,CAAAE,MAAA,GAAAF,IAAA,CAAApG,cAAA;QACAoG,IAAA,CAAA9B,SAAA,GAAA8B,IAAA,CAAAnG,iBAAA;QACAmG,IAAA,CAAA7B,OAAA,GAAA6B,IAAA,CAAAlG,eAAA;QACAkG,IAAA,CAAA/C,WAAA,GAAA+C,IAAA,CAAAjG,eAAA;QACAiG,IAAA,CAAA5B,SAAA,GAAA4B,IAAA,CAAAhG,aAAA;QACAgG,IAAA,CAAAG,MAAA,GAAAH,IAAA,CAAAvG,QAAA;MACA;MACA,IAAAN,GAAA,GAAA2G,OAAA;MACA,IAAAM,MAAA;MACAjH,GAAA,CAAAkH,OAAA,EAAAL,IAAA,EAAAC,KAAA;QACA,IAAAK,GAAA,QAAAvF,OAAA,CACAiF,IAAA,CAAA9B,SAAA,EACA8B,IAAA,CAAA7B,OAAA,EACA6B,IAAA,CAAA/C,WAAA,EACA+C,IAAA,CAAA5B,SACA;QACAgC,MAAA,CAAAG,IAAA;UACAnH,EAAA,EAAA4G,IAAA,CAAA5G,EAAA;UACAyE,IAAA,EAAAmC,IAAA,CAAApD,IAAA;UACA4D,MAAA,EAAAR,IAAA,CAAAE,MAAA;UACAvC,UAAA,MAAApD,IAAA,KAAAuD,eAAA,EAAAwC,GAAA,CAAAG,OAAA,EAAA1C,MAAA;UACA2C,QAAA,MAAAnG,IAAA,KAAAuD,eAAA,EAAAwC,GAAA,CAAAK,OAAA,EAAA5C,MAAA;UACAjB,SAAA,EAAAlB,IAAA,CAAAgF,GAAA,CAAAN,GAAA,CAAAxD,SAAA;UACAC,SAAA,EAAAnB,IAAA,CAAAgF,GAAA,CAAAN,GAAA,CAAAvD,SAAA;UACAC,SAAA,EAAApB,IAAA,CAAAgF,GAAA,CAAAN,GAAA,CAAAtD,SAAA;UACA6D,QAAA,EAAAP,GAAA,CAAAO,QAAA;UAEA3C,SAAA,EAAA8B,IAAA,CAAA9B,SAAA;UACAC,OAAA,EAAA6B,IAAA,CAAA7B,OAAA;UACAlB,WAAA,EAAA+C,IAAA,CAAA/C,WAAA;UACAmB,SAAA,EAAA4B,IAAA,CAAA5B,SAAA;UACAnC,KAAA,EAAAqE,GAAA,CAAArE,KAAA;UACAY,SAAA,EAAAyD,GAAA,CAAAzD,SAAA;UACAsD,MAAA,EAAAH,IAAA,CAAAG;QACA;MACA;MACA/E,oBAAA,CAAA0F,QAAA;MACA,KAAA7H,KAAA,CAAAD,IAAA,GAAAoH,MAAA;MACAnF,OAAA,CAAAC,GAAA,eAAAkF,MAAA;MACA;MACAhF,oBAAA,CAAAkE,IAAA,MAAAC,KAAA,CAAAnE,KAAA;MACA;MACAA,oBAAA,CAAAoE,KAAA,MAAAvG,KAAA;IACA;IACA8H,eAAA;MACA3F,oBAAA,CAAA4F,QAAA,CAAApE,IAAA;QACAxB,oBAAA,CAAA6F,IAAA,CAAArE,IAAA,CAAAxD,EAAA;MACA;IACA;IACA2B,QAAAmG,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA;MACA,IAAAf,GAAA;MACA,IAAAhG,WAAA,OAAAC,IAAA;MACA,IAAAC,IAAA,GAAAF,WAAA,CAAAG,WAAA;MACA,IAAAC,KAAA,GAAAC,MAAA,CAAAL,WAAA,CAAAM,QAAA,QAAAC,QAAA;MACA,IAAAC,GAAA,GAAAH,MAAA,CAAAL,WAAA,CAAAS,OAAA,IAAAF,QAAA;MAEA,IAAAG,aAAA,MAAAR,IAAA,IAAAE,KAAA,IAAAI,GAAA;MAEA,IAAA3B,GAAA,IACA+H,KAAA,WAAAA,KAAA,GAAAlG,aAAA,GAAAkG,KAAA,EACAC,KAAA,WAAAA,KAAA,GAAAnG,aAAA,GAAAmG,KAAA,EACAC,KAAA,YAAAA,KAAA,GAAAF,KAAA,EAAAG,KAAA,GAAAF,KAAA,IAAAC,KAAA,EACAC,KAAA,WAAAA,KAAA,GAAAF,KAAA,GAAAE,KAAA,CACA;MACA,IAAAC,OAAA;MACAnI,GAAA,CAAAkH,OAAA,CAAAL,IAAA;QACAsB,OAAA,CAAAf,IAAA,KAAAhG,IAAA,CAAAyF,IAAA;MACA;MACA,IAAAS,OAAA,OAAA3C,eAAA,EAAAlC,IAAA,CAAA2F,GAAA,IAAAD,OAAA,GAAAvD,MAAA;MACA,IAAA4C,OAAA,OAAA7C,eAAA,EAAAlC,IAAA,CAAA4F,GAAA,IAAAF,OAAA,GAAAvD,MAAA;MACA,IAAA8C,QAAA,QAAAY,UAAA,CAAAhB,OAAA,EAAAE,OAAA;MAEA,IAAA7D,SAAA;MACA,IAAAC,SAAA;MACA,IAAAC,SAAA;MACA,IAAAf,KAAA;MACA,IAAAY,SAAA;MAEA,IAAAqE,KAAA,GAAAE,KAAA,IAAAA,KAAA,GAAAD,KAAA,IAAAA,KAAA,GAAAE,KAAA;QACA;QACAxE,SAAA;QACAE,SAAA,QAAA0E,UAAA,CAAAL,KAAA,EAAAD,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAP,KAAA,EAAAE,KAAA,IAAAP,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAN,KAAA,EAAAE,KAAA,IAAAR,QAAA;MACA,WACAO,KAAA,GAAAF,KAAA,IAAAC,KAAA,IAAAE,KAAA;QACA;QACAxE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAL,KAAA,EAAAC,KAAA,IAAAR,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAP,KAAA,EAAAE,KAAA,IAAAP,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAJ,KAAA,EAAAF,KAAA,IAAAN,QAAA;MACA,WAAAK,KAAA,GAAAE,KAAA,IAAAC,KAAA,IAAAF,KAAA;QACAtE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAL,KAAA,EAAAF,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAN,KAAA,EAAAE,KAAA,IAAAR,QAAA;MACA,OACA,IACAM,KAAA,GAAAC,KAAA,IACAD,KAAA,IAAAE,KAAA,IACAD,KAAA,IAAAF,KAAA,IACAG,KAAA,GAAAH,KAAA,EACA;QACA;QACArE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAL,KAAA,EAAAC,KAAA,IAAAR,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAP,KAAA,EAAAE,KAAA,IAAAP,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAJ,KAAA,EAAAF,KAAA,IAAAN,QAAA;MACA,WACAQ,KAAA,IAAAF,KAAA,IACAE,KAAA,GAAAH,KAAA,IACAA,KAAA,IAAAE,KAAA,IACAD,KAAA,GAAAC,KAAA,EACA;QACA;QACAvE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAL,KAAA,EAAAF,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAN,KAAA,EAAAE,KAAA,IAAAR,QAAA;MACA,OAEA,IAAAM,KAAA,GAAAE,KAAA,IAAAA,KAAA,GAAAH,KAAA,IAAAA,KAAA,GAAAE,KAAA;QACA;QACAvE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAP,KAAA,EAAAG,KAAA,IAAAR,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAL,KAAA,EAAAF,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAJ,KAAA,EAAAF,KAAA,IAAAN,QAAA;MACA,WAAAM,KAAA,GAAAC,KAAA;QACA;QACAvE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAN,KAAA,EAAAC,KAAA,IAAAP,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAL,KAAA,EAAAC,KAAA,IAAAR,QAAA;MACA,WAAAQ,KAAA,GAAAF,KAAA,IAAAD,KAAA,GAAAE,KAAA;QACAvE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAJ,KAAA,EAAAH,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAL,KAAA,EAAAC,KAAA,IAAAR,QAAA;MACA,OACA,IAAAQ,KAAA,GAAAH,KAAA;QACA;QACArE,SAAA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAJ,KAAA,EAAAH,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAL,KAAA,EAAAC,KAAA,IAAAR,QAAA;MACA,WAAAQ,KAAA,IAAAF,KAAA,IAAAC,KAAA,IAAAF,KAAA;QACArE,SAAA;QACA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAN,KAAA,EAAAD,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAN,KAAA,EAAAD,KAAA,IAAAL,QAAA;MACA,WAAAQ,KAAA,GAAAF,KAAA,IAAAC,KAAA,IAAAD,KAAA;QACAtE,SAAA;QACA;QACAZ,KAAA;QACAc,SAAA,QAAA0E,UAAA,CAAAP,KAAA,EAAAC,KAAA,IAAAN,QAAA;QACA/D,SAAA,QAAA2E,UAAA,CAAAL,KAAA,EAAAF,KAAA,IAAAL,QAAA;QACA7D,SAAA,QAAAyE,UAAA,CAAAN,KAAA,EAAAE,KAAA,IAAAR,QAAA;MACA;QACAhE,SAAA;QACA5B,OAAA,CAAAC,GAAA;MACA;MACAoF,GAAA;QACArE,KAAA,EAAAA,KAAA;QACAwE,OAAA,EAAAA,OAAA;QACAE,OAAA,EAAAA,OAAA;QACAE,QAAA,EAAAA,QAAA;QACA/D,SAAA,EAAAA,SAAA;QACAC,SAAA,EAAAA,SAAA;QACAC,SAAA,EAAAA,SAAA;QACAH,SAAA,EAAAA;MACA;MACA,OAAAyD,GAAA;IACA;IACAmB,WAAAC,SAAA,EAAAL,KAAA;MACA,IAAAM,SAAA,OAAApH,IAAA,CAAAmH,SAAA;MACA,IAAAE,OAAA,OAAArH,IAAA,CAAA8G,KAAA;MACA,IAAAQ,QAAA,GAAAD,OAAA,CAAAE,OAAA,KAAAH,SAAA,CAAAG,OAAA;MACA,IAAAC,OAAA,GAAAnG,IAAA,CAAAC,KAAA,CAAAgG,QAAA;MACA,OAAAE,OAAA;IACA;EACA;AACA;AAAAC,OAAA,CAAAC,OAAA,GAAAnJ,QAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}