{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"D:/Lowcode/vue-simple/node_modules/@babel/runtime/helpers/interopRequireWildcard.js\").default;\nvar _interopRequireDefault = require(\"D:/Lowcode/vue-simple/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nvar _vue = _interopRequireDefault(require(\"vue\"));\nvar _App = _interopRequireDefault(require(\"./App.vue\"));\nvar _router = _interopRequireDefault(require(\"./router\"));\nvar _user = _interopRequireDefault(require(\"@/store/user\"));\nvar _elementUi = _interopRequireWildcard(require(\"element-ui\"));\nvar _index = _interopRequireDefault(require(\"./lang/index\"));\nrequire(\"element-ui/lib/theme-chalk/index.css\");\n_vue.default.config.productionTip = false;\n_vue.default.use(_elementUi.default);\nnew _vue.default({\n  router: _router.default,\n  store: _user.default,\n  i18n: _index.default,\n  render: h => h(_App.default)\n}).$mount('#app');\n_vue.default.config.errorHandler = function (err) {\n  _elementUi.Message.error(\"出错了\");\n};\n_vue.default.directive('drag', el => {\n  const oDiv = el; // 当前元素\n  const minTop = oDiv.getAttribute('drag-min-top'); //用以获取HTML元素的属性\n  const ifMoveSizeArea = 20;\n  oDiv.onmousedown = e => {\n    let target = oDiv;\n    while (window.getComputedStyle(target).position !== 'absolute' && target !== document.body) {\n      target = target.parentElement;\n    }\n    document.onselectstart = () => {\n      return false;\n    };\n    if (!target.getAttribute('init_x')) {\n      target.setAttribute('init_x', target.offsetLeft);\n      target.setAttribute('init_y', target.offsetTop);\n    }\n    const initX = parseInt(target.getAttribute('init_x'));\n    const initY = parseInt(target.getAttribute('init_y'));\n\n    // 鼠标按下，计算当前元素距离可视区的距离\n    const disX = e.clientX - target.offsetLeft;\n    const disY = e.clientY - target.offsetTop;\n    document.onmousemove = e => {\n      // 通过事件委托，计算移动的距离\n      // 因为浏览器里并不能直接取到并且使用clientX、clientY,所以使用事件委托在内部做完赋值\n      const l = e.clientX - disX;\n      const t = e.clientY - disY;\n      // 计算移动当前元素的位置，并且给该元素样式中的left和top值赋值\n      target.style.left = l + 'px';\n      target.style.top = (t < minTop ? minTop : t) + 'px';\n      if (Math.abs(l - initX) > ifMoveSizeArea || Math.abs(t - initY) > ifMoveSizeArea) {\n        target.setAttribute('dragged', '');\n      } else {\n        target.removeAttribute('dragged');\n      }\n    };\n    document.onmouseup = e => {\n      document.onmousemove = null;\n      document.onmouseup = null;\n      document.onselectstart = null;\n    };\n    // return false不加的话可能导致黏连，拖到一个地方时div粘在鼠标上不下来，相当于onmouseup失效\n    return false;\n  };\n});","map":{"version":3,"names":["_vue","_interopRequireDefault","require","_App","_router","_user","_elementUi","_interopRequireWildcard","_index","Vue","config","productionTip","use","ElementUI","router","store","i18n","render","h","App","$mount","errorHandler","err","Message","error","directive","el","oDiv","minTop","getAttribute","ifMoveSizeArea","onmousedown","e","target","window","getComputedStyle","position","document","body","parentElement","onselectstart","setAttribute","offsetLeft","offsetTop","initX","parseInt","initY","disX","clientX","disY","clientY","onmousemove","l","t","style","left","top","Math","abs","removeAttribute","onmouseup"],"sources":["D:/Lowcode/vue-simple/src/main.js"],"sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from '@/store/user'\r\nimport ElementUI, { Message } from 'element-ui';\r\nimport i18n from './lang/index'\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nVue.config.productionTip = false\r\nVue.use(ElementUI);\r\nnew Vue({\r\n  router,\r\n  store,\r\n  i18n,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\nVue.config.errorHandler = function(err) {\r\n  Message.error(\"出错了\");\r\n};\r\n\r\n\r\nVue.directive('drag', (el) => {\r\n  const oDiv = el // 当前元素\r\n  const minTop = oDiv.getAttribute('drag-min-top')  //用以获取HTML元素的属性\r\n  const ifMoveSizeArea = 20\r\n  oDiv.onmousedown = e => {\r\n    let target = oDiv\r\n    while (window.getComputedStyle(target).position !== 'absolute' && target !== document.body) {\r\n      target = target.parentElement\r\n    }\r\n\r\n    document.onselectstart = () => {\r\n      return false\r\n    }\r\n    if (!target.getAttribute('init_x')) {\r\n      target.setAttribute('init_x', target.offsetLeft)\r\n      target.setAttribute('init_y', target.offsetTop)\r\n    }\r\n\r\n    const initX = parseInt(target.getAttribute('init_x'))\r\n    const initY = parseInt(target.getAttribute('init_y'))\r\n\r\n    // 鼠标按下，计算当前元素距离可视区的距离\r\n    const disX = e.clientX - target.offsetLeft\r\n    const disY = e.clientY - target.offsetTop\r\n    document.onmousemove = e => {\r\n      // 通过事件委托，计算移动的距离\r\n      // 因为浏览器里并不能直接取到并且使用clientX、clientY,所以使用事件委托在内部做完赋值\r\n      const l = e.clientX - disX\r\n      const t = e.clientY - disY\r\n      // 计算移动当前元素的位置，并且给该元素样式中的left和top值赋值\r\n      target.style.left = l + 'px'\r\n      target.style.top = (t < minTop ? minTop : t) + 'px'\r\n      if (Math.abs(l - initX) > ifMoveSizeArea || Math.abs(t - initY) > ifMoveSizeArea) {\r\n        target.setAttribute('dragged', '')\r\n      } else {\r\n        target.removeAttribute('dragged')\r\n      }\r\n    }\r\n    document.onmouseup = e => {\r\n      document.onmousemove = null\r\n      document.onmouseup = null\r\n      document.onselectstart = null\r\n    }\r\n    // return false不加的话可能导致黏连，拖到一个地方时div粘在鼠标上不下来，相当于onmouseup失效\r\n    return false\r\n  }\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}