{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { userLogin } from '@/api/user';\nimport { Message } from 'element-ui';\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport router from '@/router';\nVue.use(Vuex);\nconst store = new Vuex.Store({\n  state: {\n    token: localStorage.getItem('token')\n  },\n  mutations: {\n    setToken(state, token) {\n      state.token = token;\n    }\n  },\n  actions: {\n    login({\n      commit\n    }, data) {\n      return new Promise((resolve, reject) => {\n        userLogin({\n          username: data.username,\n          password: data.password\n        }).then(res => {\n          console.log(res);\n          if (res.code == 200) {\n            const token = res.data.token;\n            commit('setToken', token);\n            localStorage.setItem('token', token);\n            router.push('/home').catch(() => {});\n            resolve();\n          } else {\n            Message({\n              message: '登陆失败  稍后重试',\n              type: \"error\",\n              duration: 3000\n            });\n            router.push('/login');\n          }\n        }).catch(error => {\n          Message({\n            message: '系统错误',\n            type: \"error\",\n            duration: 3000\n          });\n          reject(error);\n        });\n      });\n    }\n  }\n});\nexport default store;","map":{"version":3,"names":["userLogin","Message","Vue","Vuex","router","use","store","Store","state","token","localStorage","getItem","mutations","setToken","actions","login","commit","data","Promise","resolve","reject","username","password","then","res","console","log","code","setItem","push","catch","message","type","duration","error"],"sources":["D:/Lowcode/vue-low-code/src/store/user.js"],"sourcesContent":["import { userLogin } from '@/api/user'\r\nimport { Message } from 'element-ui'\r\nimport Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport router from '@/router'\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n    state: {\r\n        token: localStorage.getItem('token')\r\n    },\r\n    mutations: {\r\n        setToken(state, token) {\r\n            state.token = token\r\n        }\r\n    },\r\n    actions: {\r\n        login({ commit }, data) {\r\n           return new Promise((resolve,reject)=>{\r\n            userLogin({username:data.username,password:data.password}).then((res) => {\r\n                console.log(res);\r\n                if (res.code == 200) {\r\n                    const token = res.data.token\r\n                    commit('setToken', token)\r\n                    localStorage.setItem('token', token)\r\n                    router.push('/home').catch(() => {})\r\n                    resolve();\r\n                }else{\r\n                    Message({\r\n                        message: '登陆失败  稍后重试',\r\n                        type: \"error\",\r\n                        duration: 3000,\r\n                    })\r\n                    router.push('/login')\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                Message({\r\n                    message: '系统错误',\r\n                    type: \"error\",\r\n                    duration: 3000,\r\n                })\r\n                reject(error)\r\n            })\r\n           })\r\n\r\n        }\r\n    }\r\n})\r\n\r\nexport default store"],"mappings":";AAAA,SAASA,SAAS,QAAQ,YAAY;AACtC,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,MAAM,MAAM,UAAU;AAC7BF,GAAG,CAACG,GAAG,CAACF,IAAI,CAAC;AAEb,MAAMG,KAAK,GAAG,IAAIH,IAAI,CAACI,KAAK,CAAC;EACzBC,KAAK,EAAE;IACHC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;EACvC,CAAC;EACDC,SAAS,EAAE;IACPC,QAAQA,CAACL,KAAK,EAAEC,KAAK,EAAE;MACnBD,KAAK,CAACC,KAAK,GAAGA,KAAK;IACvB;EACJ,CAAC;EACDK,OAAO,EAAE;IACLC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAEC,IAAI,EAAE;MACrB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAACC,MAAM,KAAG;QACpCpB,SAAS,CAAC;UAACqB,QAAQ,EAACJ,IAAI,CAACI,QAAQ;UAACC,QAAQ,EAACL,IAAI,CAACK;QAAQ,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;UACrEC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;UAChB,IAAIA,GAAG,CAACG,IAAI,IAAI,GAAG,EAAE;YACjB,MAAMlB,KAAK,GAAGe,GAAG,CAACP,IAAI,CAACR,KAAK;YAC5BO,MAAM,CAAC,UAAU,EAAEP,KAAK,CAAC;YACzBC,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAEnB,KAAK,CAAC;YACpCL,MAAM,CAACyB,IAAI,CAAC,OAAO,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACpCX,OAAO,CAAC,CAAC;UACb,CAAC,MAAI;YACDlB,OAAO,CAAC;cACJ8B,OAAO,EAAE,YAAY;cACrBC,IAAI,EAAE,OAAO;cACbC,QAAQ,EAAE;YACd,CAAC,CAAC;YACF7B,MAAM,CAACyB,IAAI,CAAC,QAAQ,CAAC;UACzB;QACJ,CAAC,CAAC,CACDC,KAAK,CAACI,KAAK,IAAE;UACVjC,OAAO,CAAC;YACJ8B,OAAO,EAAE,MAAM;YACfC,IAAI,EAAE,OAAO;YACbC,QAAQ,EAAE;UACd,CAAC,CAAC;UACFb,MAAM,CAACc,KAAK,CAAC;QACjB,CAAC,CAAC;MACH,CAAC,CAAC;IAEL;EACJ;AACJ,CAAC,CAAC;AAEF,eAAe5B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}