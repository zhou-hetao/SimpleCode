{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/Lowcode/vue-low-code/node_modules/@babel/runtime/helpers/interopRequireDefault.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nvar _user = require(\"@/api/user\");\nvar _elementUi = require(\"element-ui\");\nvar _vue = _interopRequireDefault(require(\"vue\"));\nvar _vuex = _interopRequireDefault(require(\"vuex\"));\nvar _router = _interopRequireDefault(require(\"@/router\"));\n_vue.default.use(_vuex.default);\nconst store = new _vuex.default.Store({\n  state: {\n    user: localStorage.getItem('username'),\n    token: localStorage.getItem('token'),\n    navList: JSON.parse(localStorage.getItem('navList')) //左侧导航栏数据\n  },\n\n  mutations: {\n    setToken(state, token) {\n      state.token = token;\n    },\n    setuser(state, user) {\n      state.user = user;\n    },\n    setNavList(state, navList) {\n      state.navList = navList;\n    }\n  },\n  actions: {\n    login({\n      commit\n    }, data) {\n      return new Promise((resolve, reject) => {\n        (0, _user.userLogin)({\n          username: data.username,\n          password: data.password,\n          phone: data.phone\n        }).then(res => {\n          console.log(res);\n          if (res.code == 200) {\n            const token = res.data.token;\n            const user = res.data.user;\n            const navList = res.data.navList;\n            commit('setToken', token);\n            commit('setuser', user);\n            commit('setNavList', navList);\n            localStorage.setItem('token', token);\n            localStorage.setItem('username', user);\n            localStorage.setItem('navList', JSON.stringify(navList));\n            _router.default.push('/Worktable').catch(() => {});\n            resolve();\n          } else {\n            (0, _elementUi.Message)({\n              message: '登陆失败  稍后重试',\n              type: \"error\",\n              duration: 3000\n            });\n          }\n        }).catch(error => {\n          (0, _elementUi.Message)({\n            message: '系统错误',\n            type: \"error\",\n            duration: 3000\n          });\n          reject(error);\n        });\n      });\n    }\n  }\n});\nvar _default = store;\nexports.default = _default;","map":{"version":3,"names":["_user","require","_elementUi","_vue","_interopRequireDefault","_vuex","_router","Vue","use","Vuex","store","Store","state","user","localStorage","getItem","token","navList","JSON","parse","mutations","setToken","setuser","setNavList","actions","login","commit","data","Promise","resolve","reject","userLogin","username","password","phone","then","res","console","log","code","setItem","stringify","router","push","catch","Message","message","type","duration","error","_default","exports","default"],"sources":["D:/Lowcode/vue-low-code/src/store/user.js"],"sourcesContent":["import { userLogin } from '@/api/user'\r\nimport { Message } from 'element-ui'\r\nimport Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport router from '@/router'\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n    state: {\r\n        user:localStorage.getItem('username'),\r\n        token: localStorage.getItem('token'),\r\n        navList:JSON.parse(localStorage.getItem('navList'))//左侧导航栏数据\r\n    },\r\n    mutations: {\r\n        setToken(state, token) {\r\n            state.token = token\r\n        },\r\n        setuser(state,user){\r\n            state.user = user\r\n        },\r\n        setNavList(state,navList){\r\n            state.navList = navList\r\n        }\r\n    },\r\n    actions: {\r\n        login({ commit }, data) {\r\n           return new Promise((resolve,reject)=>{\r\n            userLogin({username:data.username,password:data.password,phone:data.phone}).then((res) => {\r\n                console.log(res);\r\n                if (res.code == 200) {\r\n                    const token = res.data.token\r\n                    const user = res.data.user\r\n                    const navList =  res.data.navList\r\n                    commit('setToken', token)\r\n                    commit('setuser',user)\r\n                    commit('setNavList',navList)\r\n                    localStorage.setItem('token', token)\r\n                    localStorage.setItem('username', user)\r\n                    localStorage.setItem('navList', JSON.stringify(navList))\r\n                    router.push('/Worktable').catch(() => {})\r\n                    resolve();\r\n                }else{\r\n                    Message({\r\n                        message: '登陆失败  稍后重试',\r\n                        type: \"error\",\r\n                        duration: 3000,\r\n                    })\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                Message({\r\n                    message: '系统错误',\r\n                    type: \"error\",\r\n                    duration: 3000,\r\n                })\r\n                reject(error)\r\n            })\r\n           })\r\n\r\n        }\r\n    }\r\n})\r\n\r\nexport default store"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}