{"ast":null,"code":"import axios from \"axios\"; //引入axios\nimport env from \"@/api/http/env\";\nimport { Message } from \"element-ui\";\n// 创建axios实例\nconst service = axios.create({\n  //这里拿开发接口测试\n  baseURL: env.dev.baseUrl,\n  headers: {\n    //请求头\n    'Content-Type': 'X-www-form-urlencoded'\n  },\n  timeout: 5000 //超时时间\n});\n// 请求拦截器\nservice.interceptors.request.use(config => {\n  //验证token\n  // console.log(\"请求的数据:\", config);\n  // if (localStorage.getItem('token')) {\n  //   config.headers.token = localStorage.getItem('token')\n  // }\n  return config;\n}, error => {\n  // 对请求错误做些什么\n  // console.log(\"请求的数据:\", error);\n  return Promise.reject(error);\n});\n\n// 响应拦截器\nservice.interceptors.response.use(response => {\n  // console.log(\"返回的数据\", response);\n  // 这里拦截401错误，并重新跳入登页重新获取token\n  if (response.status && response.status === 200) {\n    // 通讯成功\n    if (response.data.code === 0) {\n      return response.data;\n    }\n    //   else if (response.data.code === 401) { \n    //     // 如果是token过期，跳转至登录\n    //     this.$message.error(\"登录已过期，请重新登录！\");\n    //     localStorage.removeItem('token') // 移除token，跳转至登录\n    //     router.push({ \n    //       path: '/Login'\n    //     })\n    //   }\n    return Promise.resolve(response.data);\n  }\n}, err => {\n  // 对响应错误做点什么.\n  if (err && err.response) {\n    switch (err.response.status) {\n      case 400:\n        err.message = '请求错误';\n        Message.error(err.message);\n        break;\n      case 401:\n        err.message = '未授权，请登录';\n        Message.error(err.message);\n        break;\n      case 403:\n        err.message = '拒绝访问';\n        Message.error(err.message);\n        break;\n      case 404:\n        err.message = `请求地址出错: ${err.response.config.url}`;\n        Message.error(err.message);\n        break;\n      case 408:\n        err.message = '请求超时';\n        Message.error(err.message);\n        break;\n      case 500:\n        err.message = '服务器内部错误';\n        Message.error(err.message);\n        break;\n      case 501:\n        err.message = '服务未实现';\n        Message.error(err.message);\n        break;\n      case 502:\n        err.message = '网关错误';\n        Message.error(err.message);\n        break;\n      case 503:\n        err.message = '服务不可用';\n        Message.error(err.message);\n        break;\n      case 504:\n        err.message = '网关超时';\n        Message.error(err.message);\n        break;\n      case 505:\n        err.message = 'HTTP版本不受支持';\n        Message.error(err.message);\n        break;\n      case 0:\n        err.message = '接口不存在';\n        console.log(\"111\");\n        Message.error(err.message);\n        break;\n      default:\n    }\n  }\n  return Promise.reject(err); // 返回接口返回的错误信息\n});\n\nexport default service;","map":{"version":3,"names":["axios","env","Message","service","create","baseURL","dev","baseUrl","headers","timeout","interceptors","request","use","config","error","Promise","reject","response","status","data","code","resolve","err","message","url","console","log"],"sources":["D:/Lowcode/vue-low-code/src/utils/request.js"],"sourcesContent":["import axios from \"axios\";  //引入axios\r\nimport env from \"@/api/http/env\";\r\nimport { Message } from \"element-ui\";\r\n// 创建axios实例\r\nconst service = axios.create({\r\n    //这里拿开发接口测试\r\n    baseURL: env.dev.baseUrl,\r\n    headers:{ //请求头\r\n        'Content-Type': 'X-www-form-urlencoded',\r\n    },\r\n    timeout: 5000,//超时时间\r\n});\r\n// 请求拦截器\r\nservice.interceptors.request.use(\r\n    config => {\r\n        //验证token\r\n        // console.log(\"请求的数据:\", config);\r\n        // if (localStorage.getItem('token')) {\r\n        //   config.headers.token = localStorage.getItem('token')\r\n        // }\r\n        return config;\r\n    },\r\n    error => {\r\n        // 对请求错误做些什么\r\n        // console.log(\"请求的数据:\", error);\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(\r\n    response => {\r\n        // console.log(\"返回的数据\", response);\r\n        // 这里拦截401错误，并重新跳入登页重新获取token\r\n        if (response.status && response.status === 200) {\r\n            // 通讯成功\r\n            if (response.data.code === 0) {\r\n                return response.data\r\n            }\r\n            //   else if (response.data.code === 401) { \r\n            //     // 如果是token过期，跳转至登录\r\n            //     this.$message.error(\"登录已过期，请重新登录！\");\r\n            //     localStorage.removeItem('token') // 移除token，跳转至登录\r\n            //     router.push({ \r\n            //       path: '/Login'\r\n            //     })\r\n            //   }\r\n            return Promise.resolve(response.data)\r\n        }\r\n    },\r\n    err => {\r\n        // 对响应错误做点什么.\r\n        if (err && err.response) {\r\n            switch (err.response.status) {\r\n                case 400:\r\n                    err.message = '请求错误'\r\n                    Message.error(err.message)\r\n\r\n                    break\r\n                case 401:\r\n                    err.message = '未授权，请登录'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 403:\r\n                    err.message = '拒绝访问'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 404:\r\n                    err.message = `请求地址出错: ${err.response.config.url}`\r\n                    Message.error(err.message)\r\n                    break\r\n                case 408:\r\n                    err.message = '请求超时'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 500:\r\n                    err.message = '服务器内部错误'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 501:\r\n                    err.message = '服务未实现'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 502:\r\n                    err.message = '网关错误'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 503:\r\n                    err.message = '服务不可用'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 504:\r\n                    err.message = '网关超时'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 505:\r\n                    err.message = 'HTTP版本不受支持'\r\n                    Message.error(err.message)\r\n                    break\r\n                case 0:\r\n                    err.message = '接口不存在'\r\n                    console.log(\"111\");\r\n                    Message.error(err.message)\r\n                    break\r\n                default:\r\n            }\r\n        }\r\n        return Promise.reject(err) // 返回接口返回的错误信息\r\n    }\r\n);\r\nexport default service;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}