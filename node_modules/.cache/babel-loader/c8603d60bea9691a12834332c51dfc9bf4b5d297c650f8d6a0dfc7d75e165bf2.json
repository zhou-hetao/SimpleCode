{"ast":null,"code":"export default {\n  props: {\n    columns: {\n      //表头  必传\n      type: Array,\n      required: true\n    },\n    data: {\n      //对应数据   必传\n      type: Array,\n      required: true\n    },\n    border: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data() {\n    return {\n      minWidth: 50,\n      isDragging: false,\n      resizingColumnIndex: null,\n      startX: null\n    };\n  },\n  methods: {\n    canResize(index) {\n      return index < this.columns.length - 1 && this.columns[index + 1].resizable !== false;\n    },\n    startResizeColumn(index) {\n      this.isDragging = true;\n      this.resizingColumnIndex = index;\n      this.startX = event.pageX;\n      event.preventDefault();\n    },\n    handleMouseMove(event) {\n      if (this.isDragging && this.resizingColumnIndex !== null) {\n        const {\n          pageX\n        } = event;\n        const offset = pageX - this.startX;\n        if (this.columns[this.resizingColumnIndex].width + offset >= this.minWidth && this.columns[this.resizingColumnIndex + 1].width - offset >= this.minWidth) {\n          this.columns[this.resizingColumnIndex].width += offset;\n          this.columns[this.resizingColumnIndex + 1].width -= offset;\n          this.startX = pageX;\n        }\n      }\n    },\n    handleMouseUp() {\n      this.isDragging = false;\n      this.resizingColumnIndex = null;\n    }\n  },\n  mounted() {\n    document.addEventListener('mousemove', this.handleMouseMove);\n    document.addEventListener('mouseup', this.handleMouseUp);\n  },\n  beforeDestroy() {\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n  }\n};","map":{"version":3,"names":["props","columns","type","Array","required","data","border","Boolean","minWidth","isDragging","resizingColumnIndex","startX","methods","canResize","index","length","resizable","startResizeColumn","event","pageX","preventDefault","handleMouseMove","offset","width","handleMouseUp","mounted","document","addEventListener","beforeDestroy","removeEventListener"],"sources":["src/components/table/shipTable.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <table :border=\"border\">\r\n        <thead>\r\n          <tr>\r\n            <th v-for=\"(column, index) in columns\" :key=\"index\" :style=\"{ backgroundColor: column.backgroundColor }\">\r\n              {{ column.label }}\r\n              <span\r\n                v-if=\"index < columns.length - 1\"\r\n                :class=\"{ 'is-resizable': canResize(index), 'is-resizing': resizingColumnIndex === index }\"\r\n                @mousedown=\"startResizeColumn(index)\"\r\n              ></span>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"(item, index) in data\" :key=\"index\">\r\n            <td v-for=\"(column, colIndex) in columns\" :key=\"colIndex\">{{ item[column.prop] }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    props: {\r\n      columns: { //表头  必传\r\n        type: Array,\r\n        required: true\r\n      },\r\n      data: {  //对应数据   必传\r\n        type: Array,\r\n        required: true\r\n      },\r\n      border:{\r\n        type:Boolean,\r\n        required: true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        minWidth: 50,\r\n        isDragging: false,\r\n        resizingColumnIndex: null,\r\n        startX: null\r\n      }\r\n    },\r\n    methods: {\r\n      canResize(index) {\r\n        return index < this.columns.length - 1 && this.columns[index + 1].resizable !== false\r\n      },\r\n      startResizeColumn(index) {\r\n        this.isDragging = true\r\n        this.resizingColumnIndex = index\r\n        this.startX = event.pageX\r\n        event.preventDefault()\r\n      },\r\n      handleMouseMove(event) {\r\n        if (this.isDragging && this.resizingColumnIndex !== null) {\r\n          const { pageX } = event\r\n          const offset = pageX - this.startX\r\n          if (this.columns[this.resizingColumnIndex].width + offset >= this.minWidth && this.columns[this.resizingColumnIndex + 1].width - offset >= this.minWidth) {\r\n            this.columns[this.resizingColumnIndex].width += offset\r\n            this.columns[this.resizingColumnIndex + 1].width -= offset\r\n            this.startX = pageX\r\n          }\r\n        }\r\n      },\r\n      handleMouseUp() {\r\n        this.isDragging = false\r\n        this.resizingColumnIndex = null\r\n      }\r\n    },\r\n    mounted() {\r\n      document.addEventListener('mousemove', this.handleMouseMove)\r\n      document.addEventListener('mouseup', this.handleMouseUp)\r\n    },\r\n    beforeDestroy() {\r\n      document.removeEventListener('mousemove', this.handleMouseMove)\r\n      document.removeEventListener('mouseup', this.handleMouseUp)\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style>\r\n  table {\r\n    width: 100%;\r\n  }\r\n  th {\r\n    position: relative;\r\n    min-height: 36px;\r\n    padding: 8px;\r\n    text-align: left;\r\n    box-sizing: border-box;\r\n  }\r\n  th.is-resizable {\r\n    cursor: col-resize;\r\n  }\r\n  th.is-resizing {\r\n    user-select: none;\r\n  }\r\n  td {\r\n    padding: 8px;\r\n    text-align: left;\r\n    box-sizing: border-box;\r\n  }\r\n  table {\r\n    border-collapse: collapse;\r\n}\r\n  </style>\r\n  "],"mappings":"AAyBA;EACAA,KAAA;IACAC,OAAA;MAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,QAAA;IACA;IACAC,IAAA;MAAA;MACAH,IAAA,EAAAC,KAAA;MACAC,QAAA;IACA;IACAE,MAAA;MACAJ,IAAA,EAAAK,OAAA;MACAH,QAAA;IACA;EACA;EACAC,KAAA;IACA;MACAG,QAAA;MACAC,UAAA;MACAC,mBAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAAC,KAAA;MACA,OAAAA,KAAA,QAAAb,OAAA,CAAAc,MAAA,aAAAd,OAAA,CAAAa,KAAA,MAAAE,SAAA;IACA;IACAC,kBAAAH,KAAA;MACA,KAAAL,UAAA;MACA,KAAAC,mBAAA,GAAAI,KAAA;MACA,KAAAH,MAAA,GAAAO,KAAA,CAAAC,KAAA;MACAD,KAAA,CAAAE,cAAA;IACA;IACAC,gBAAAH,KAAA;MACA,SAAAT,UAAA,SAAAC,mBAAA;QACA;UAAAS;QAAA,IAAAD,KAAA;QACA,MAAAI,MAAA,GAAAH,KAAA,QAAAR,MAAA;QACA,SAAAV,OAAA,MAAAS,mBAAA,EAAAa,KAAA,GAAAD,MAAA,SAAAd,QAAA,SAAAP,OAAA,MAAAS,mBAAA,MAAAa,KAAA,GAAAD,MAAA,SAAAd,QAAA;UACA,KAAAP,OAAA,MAAAS,mBAAA,EAAAa,KAAA,IAAAD,MAAA;UACA,KAAArB,OAAA,MAAAS,mBAAA,MAAAa,KAAA,IAAAD,MAAA;UACA,KAAAX,MAAA,GAAAQ,KAAA;QACA;MACA;IACA;IACAK,cAAA;MACA,KAAAf,UAAA;MACA,KAAAC,mBAAA;IACA;EACA;EACAe,QAAA;IACAC,QAAA,CAAAC,gBAAA,mBAAAN,eAAA;IACAK,QAAA,CAAAC,gBAAA,iBAAAH,aAAA;EACA;EACAI,cAAA;IACAF,QAAA,CAAAG,mBAAA,mBAAAR,eAAA;IACAK,QAAA,CAAAG,mBAAA,iBAAAL,aAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}